<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Changelog &mdash; Finagle 6.35.0 documentation</title>
    
    <link rel="stylesheet" href="_static/finagle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.35.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Finagle 6.35.0 documentation" href="index.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="FAQ" href="FAQ.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head>
  <body>
  
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="license.html" title="License"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="FAQ.html" title="FAQ"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Finagle</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<p>Below is a list of changes for each Finagle release.</p>
<p>Note that <tt class="docutils literal"><span class="pre">RB_ID=#</span></tt> correspond to associated messages in commits.</p>
<div class="section" id="x">
<h2>6.x<a class="headerlink" href="#x" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>6.35.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle: remove unused finagle-validate and finagle-testers packages. <tt class="docutils literal"><span class="pre">RB_ID=818726</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="runtime-behavior-changes">
<h3>Runtime Behavior Changes<a class="headerlink" href="#runtime-behavior-changes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: DeadlineFilter is now per-connection, so the max rejection percentage
is not shared across clients. This prevents a single client from exceeding the rejection
budget. <tt class="docutils literal"><span class="pre">RB_ID=813731</span></tt>.</li>
<li>finagle-http: Local Dtabs are now encoded into the <cite>Dtab-Local</cite> header.  <cite>X-Dtab</cite> headers
may still be read but should be considered deprecated. <tt class="docutils literal"><span class="pre">RB_ID=815092</span></tt></li>
<li>finagle-thrift: Removed duplicate &#8220;thrift&#8221; label on Thrift/ThriftMux scrooge-related
server stats. <tt class="docutils literal"><span class="pre">RB_ID=816825</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="breaking-api-changes">
<h3>Breaking API Changes<a class="headerlink" href="#breaking-api-changes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-redis: Deprecated ChannelBuffer exposing apis for string commands. <tt class="docutils literal"><span class="pre">RB_ID=817766</span></tt>.</li>
<li>finagle-core: DefaultClient has been removed. Implementors should prefer <cite>c.t.f.StackClient</cite></li>
</ul>
<p><tt class="docutils literal"><span class="pre">RB_ID=812681</span></tt>.</p>
<ul class="simple">
<li>finagle-core: When a client is created, its server set resolution is started eagerly.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">RB_ID=806940</span></tt></p>
<ul class="simple">
<li>finagle-core: Dentry now takes a Dentry.Prefix instead of a Path. <tt class="docutils literal"><span class="pre">RB_ID=813914</span></tt></li>
<li>finagle-cache-resolver: <cite>c.t.f.cacheresolver.ZookeeperCacheNodeGroup</cite> has been removed from the
API since we no longer check for the zookeeper data for the cache pool size to refresh for the
changes in the serverset. <tt class="docutils literal"><span class="pre">RB_ID=811190</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Multi-line Dtabs may now contain line-oriented comments beginning with &#8216;#&#8217;.
Comments are omitted from parsed Dtabs. <tt class="docutils literal"><span class="pre">RB_ID=818752</span></tt></li>
<li>finagle-http: new stack params MaxChunkSize, MaxHeaderSize, and MaxInitialLineLength
are available to configure the http codec. <tt class="docutils literal"><span class="pre">RB_ID=811129</span></tt></li>
<li>finagle-mux: Mux now has support for fragmenting Tdispatch and Rdispatch payloads.
This helps with head-of-line blocking in the presence of large payloads and allows
long transmissions to be interrupted. <tt class="docutils literal"><span class="pre">RB_ID=794641</span></tt>.</li>
<li>finagle-core: Dtabs allow wildcard path elements in prefixes. <tt class="docutils literal"><span class="pre">RB_ID=813914</span></tt></li>
<li>finagle-netty4: HTTP proxy support for any Finagle Netty 4 client. <tt class="docutils literal"><span class="pre">RB_ID=819752</span></tt></li>
<li>finagle-core: Gauge for dns resolutions awaiting lookups. <tt class="docutils literal"><span class="pre">RB_ID=822410</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-http: Ensure that service closure is delayed until chunked response bodies
have been processed. <tt class="docutils literal"><span class="pre">RB_ID=813110</span></tt></li>
<li>finagle-stats: Ensure that histogram snapshotting does not fall behind if snapshot()
is not called at least once per interval. <tt class="docutils literal"><span class="pre">RB_ID=826149</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id2">
<h2>6.34.0<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: GenSerialClientDispatcher fails pending and subsequent requests when
its underlying transport closes. <tt class="docutils literal"><span class="pre">RB_ID=807590</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id4">
<h3>New Features<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Include upstream/downstream addresses/client ids and request trace id
in exceptions that extend <cite>c.t.f.HasRemoteInfo</cite> (including <cite>c.t.f.SourcedException</cite>),
accessible via the <cite>remoteInfo</cite> value. <tt class="docutils literal"><span class="pre">RB_ID=797082</span></tt></li>
<li>finagle-core: Introduce <cite>c.t.f.service.ResponseClassifier</cite> for HTTP servers,
which allows developers to give Finagle the additional application specific knowledge
necessary in order to properly classify responses.``RB_ID=800179``</li>
<li>finagle: Export two new histograms: <cite>request_payload_bytes</cite> and <cite>response_payload_bytes</cite>
for the following protocols: HTTP (non-chunked), Mux, ThriftMux and Thrift. <tt class="docutils literal"><span class="pre">RB_ID=797821</span></tt></li>
<li>finagle-core: Define <cite>c.t.f.Address</cite> to represent an endpoint&#8217;s physical location.
Resolvers and namers may attach metadata such as weight to individual endpoint addresses.
<tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></li>
<li>finagle-http: Introduce convenience extractors to pattern match <cite>c.t.f.http.Response.status</cite>
against the different categories. <tt class="docutils literal"><span class="pre">RB_ID=802953</span></tt></li>
<li>finagle-http: Add <cite>toBoolean</cite> method in <cite>StringUtil</cite> to parse strings to boolean consistently.
<tt class="docutils literal"><span class="pre">RB_ID=804056</span></tt></li>
<li>finagle-http: Servers now actually decompress requests when decompression is turned on.
<tt class="docutils literal"><span class="pre">RB_ID=810629</span></tt></li>
<li>finagle-redis: Add support for SENTINEL commands. <tt class="docutils literal"><span class="pre">RB_ID=810663</span></tt></li>
<li>finagle-redis: Support for Pub/Sub. <tt class="docutils literal"><span class="pre">RB_ID=810610</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id5">
<h3>Breaking API Changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">finagle-core: <cite>c.t.f.Codec.prepareConnFactory(ServiceFactory)</cite> is marked <cite>final</cite>, override
<cite>c.t.f.Codec.prepareConnFactory(ServiceFactory, Stack.Params)</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=797821</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.Codec.newClientDispatcher(Transport)</cite> is marked <cite>final</cite>, override
<cite>c.t.f.Codec.newClientDispatcher(Transport, Stack.Params)</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=797821</span></tt></p>
</li>
<li><p class="first">finagle-core: Removed deprecations: <tt class="docutils literal"><span class="pre">RB_ID=800974</span></tt>
- Removed <cite>c.t.f.Service.release</cite>, replace usage with <cite>Service.close()</cite>.
- Removed <cite>c.t.f.ServiceFactory.make</cite>, replace usage with <cite>ServiceFactory.apply</cite>.
- Removed <cite>c.t.f.ProxyServiceFactory</cite>, replace usage with <cite>ServiceFactoryProxy</cite>.
- Removed deprecated <cite>c.t.f.service.FailureAccrualFactory</cite> constructor.
- Removed <cite>c.t.f.netty3.ChannelBufferBuf.apply</cite>, replace usage with <cite>ChannelBufferBuf.Owned.apply</cite>.
- Removed <cite>c.t.f.util.InetAddressUtil.Loopback</cite>, replace usage with <cite>java.net.InetAddress.getLoopbackAddress</cite>.
- Removed <cite>c.t.f.tracing.TracingFilter</cite>, replace usage with <cite>TraceInitializationFilter</cite> and <cite>(Client|Server)TracingFilter</cite>.</p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.Addr.Bound.addr</cite> type changed from <cite>Set[SocketAddress]</cite> to
<cite>Set[c.t.f.Address]</cite>. We provide a migration guide below for the most common cases.</p>
<p>Callers of <cite>c.t.f.Addr.Bound.addr</cite> must handle <cite>Set[c.t.f.Address]</cite> instead of
<cite>Set[SocketAddresses]</cite>. If you do something with the <cite>SocketAddress</cite> and expect the underlying
type to be <cite>InetSocketAddress</cite>, use <cite>c.t.f.Address.Inet.addr</cite> to get the underlying
<cite>InetSocketAddress</cite>.</p>
<p><cite>c.t.f.Addr</cite> constructors and <cite>c.t.f.Name.bound</cite> method now accept <cite>c.t.f.Address</cite> instead
of <cite>SocketAddress</cite>. For most cases, wrapping the <cite>InetSocketAddress</cite> in an <cite>Address.Inet</cite>
will fix the compile error.</p>
<p>Any other <cite>SocketAddress</cite> subclass is currently incompatible with <cite>c.t.f.Address</cite>. Instead,
you should encode any additional information in the metadata field of <cite>c.t.f.Address.Inet</cite>
or <cite>c.t.f.exp.Address.ServiceFactory</cite>. <tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></p>
</li>
<li><p class="first">finagle-core: Delete <cite>c.t.f.ServiceFactorySocketAddress</cite> and replace usages with
<cite>c.t.f.exp.Address.ServiceFactory</cite>. <tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></p>
</li>
<li><p class="first">finagle-core: Delete <cite>c.t.f.WeightedSocketAddress</cite> and instead use
<cite>c.t.f.addr.WeightedAddress</cite> to represent address weights. <tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.builder.ClientBuilder.hosts</cite> takes a Seq of <cite>InetSocketAddress</cite> instead of
<cite>SocketAddress</cite>. If you get a compile error, change the static type to <cite>InetSocketAddress</cite> if
you can. Otherwise, cast it at runtime to <cite>InetSocketAddress</cite>. <tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.client.Transporter.EndpointAddr</cite> takes a <cite>c.t.f.Address</cite> as its
parameter instead of <cite>SocketAddress</cite>. <tt class="docutils literal"><span class="pre">RB_ID=792209</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.service.FauilureAccrualFactory.Param(FailureAccrualPolicy)</cite> is removed -
it&#8217;s not safe to configure Failure Accrual with a shareable instance of the policy, use
<cite>() =&gt; FailureAccrualPolicy</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=802953</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>$Client.withSessionQualifier.failureAccrualPolicy</cite> has been removed from the API
since it enables an experimental feature (use Stack&#8217;s <cite>.configured</cite> API instead). <tt class="docutils literal"><span class="pre">RB_ID=802953</span></tt></p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.service.exp.FailureAccrualPolicies</cite> (Java-friendly API) has been removed -
use <cite>c.t.f.service.exp.FailureAccrualPolicy</cite> instead.</p>
</li>
<li><p class="first">finagle-core: DefaultServer is removed. Protocol implementors should use StackServer instead.</p>
</li>
</ul>
<p><tt class="docutils literal"><span class="pre">RB_ID=811918</span></tt></p>
<ul class="simple">
<li>finagle-memcached: <cite>c.t.f.memcached.protocol.text.Memcached</cite> no longer takes a <cite>StatsReceiver</cite>,
pass it to a <cite>(Client/Server)Builder</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=797821</span></tt></li>
<li>finagle-redis: <cite>c.t.f.redis.Redis</cite> no longer takes a <cite>StatsReceiver</cite>, pass it to a
<cite>(Client/Server)Builder</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=797821</span></tt></li>
<li>finagle-core: <cite>c.t.f.http.MapHeaderMap</cite> no longer takes a <cite>mutable.Map[String, Seq[String]]</cite> as
a constructor parameter. <cite>apply</cite> method provides a similar functionality.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id6">
<h3>Bug Fixes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Fixed <cite>getAll</cite> method on <cite>c.t.f.http.MapHeaderMap</cite>, now it is case insensitive.
<cite>apply</cite> method was altering the provided header names. This is fixed it is now possible to
iterate on the original header names.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id7">
<h2>6.33.0<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3>New Features<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Introduce the <cite>c.t.f.service.PendingRequestFactory</cite> module in the client Stack.
The module allows clients to limit the number of pending requests per connection. It is disabled
by default. <tt class="docutils literal"><span class="pre">RB_ID=795491</span></tt></li>
<li>finagle-core: Introduce the <cite>c.t.f.filter.ServerAdmissionControl</cite> module in the server Stack,
which is enabled through the param <cite>c.t.f.param.EnableServerAdmissionControl</cite>. Users can define
their own admission control filters, which reject requests when the server operates beyond
its capacity. These rejections apply backpressure and allow clients to retry requests on
servers that may not be over capacity. The filter implementation should define its own logic
to determine over capacity. One or more admission control filters can be installed through
the <cite>ServerAdmissionControl.register</cite> method. <tt class="docutils literal"><span class="pre">RB_ID=776385</span></tt></li>
<li>finagle-core: Introduce <cite>c.t.f.service.ResponseClassifier</cite> which allows developers to
give Finagle the additional application specific knowledge necessary in order to properly
classify them. Without this, Finagle can only safely make judgements about transport
level failures. This is now used by <cite>StatsFilter</cite> and <cite>FailureAccrualFactory</cite> so that
application level failures can be used for both success metrics and failure accrual.
<tt class="docutils literal"><span class="pre">RB_ID=772906</span></tt></li>
<li>finagle-core: Added a new &#8216;Endpoints&#8217; section on client pages, listing the weights, paths,
and resolved endpoints for each dtab.``RB_ID=779001``</li>
<li>finagle-core: Introduce discoverable stack params which are available on every client/server
via the <cite>with</cite>-prefixed methods. <tt class="docutils literal"><span class="pre">RB_ID=781833</span></tt></li>
<li>finagle-memcached: Added <cite>c.t.f.memcached.BaseClient.checkAndSet</cite> which exposes the difference
between a conflict and a not found result.</li>
<li>finagle-mux: Add a Wireshark dissector that can decode Mux messages. <tt class="docutils literal"><span class="pre">RB_ID=779482</span></tt></li>
<li>finagle-stats: Define flag <cite>c.t.f.stats.statsFilterFile</cite> as GlobalFlag[Set[File]] to take
comma-separated multiple files. <tt class="docutils literal"><span class="pre">RB_ID=793397</span></tt></li>
<li>finagle-mux: Tinit/Rinit are now available and permit feature negotiation. <tt class="docutils literal"><span class="pre">RB_ID=793350</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id9">
<h3>Deprecations<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-memcached: <cite>c.t.f.memcached.BaseClient.cas</cite> is deprecated in favor of the richer
<cite>checkAndSet</cite> method.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id10">
<h3>Breaking API Changes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: All the deprecated exceptions from <cite>Exceptions.scala</cite> have been removed.
<tt class="docutils literal"><span class="pre">RB_ID=774658</span></tt></li>
<li>finagle-thrift: Remove the <cite>framed</cite> attributes from <cite>c.t.f.Thrift.Client</cite> and
<cite>c.t.f.Thrift.Server</cite>.  This behavior may now be controlled with <cite>c.t.f.Thrift.param.Framed</cite>.</li>
<li>finagle-core: Unused <cite>c.t.f.builder.NonShrinkingCluster</cite> has been removed.
<tt class="docutils literal"><span class="pre">RB_ID=779001</span></tt></li>
<li>finagle-thrift: <cite>c.t.f.ThriftRichClient</cite> has a new abstract protected method
<cite>responseClassifier: ResponseClassifier</cite>. If your implementation does not need
this, you can implement it with <cite>ResponseClassifier.Default</cite>. <tt class="docutils literal"><span class="pre">RB_ID=791470</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id11">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-thrift,thriftmux: Deserialization of Thrift responses now happens as part
of service application which means that it will now be part of the latency reported by
<cite>StatsFilter</cite>. The actual latency as perceived by clients will not have changed, but
for clients that spend significant time deserializing and do not have higher level
metrics this may come as a surprise. <tt class="docutils literal"><span class="pre">RB_ID=772931</span></tt></li>
<li>finagle-mux,thriftmux: The default <cite>closeTimeout</cite> in ping based failure detection
is changed from Duration.Top to 4 seconds, to allow a session to be closed by default
when a ping response times out after 4 seconds. This allows sessions to be reestablished
when there may be a networking issue, so that it can choose an alternative networking
path instead. <tt class="docutils literal"><span class="pre">RB_ID=773649</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id12">
<h3>Breaking API Changes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-thrift: Remove the <cite>framed</cite> attributes from <cite>c.t.f.Thrift.Client</cite> and
<cite>c.t.f.Thrift.Server</cite>.  This behavior may now be controlled with <cite>c.t.f.Thrift.param.Framed</cite>.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id13">
<h2>6.32.0<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<p>NOT RELEASED</p>
</div>
<div class="section" id="id14">
<h2>6.31.0<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id15">
<h3>New Features<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.Server</cite> now has a <cite>serveAndAnnounce</cite> method that accepts a <cite>SocketAddress</cite>
as an address. <tt class="docutils literal"><span class="pre">RB_ID=758862</span></tt></li>
<li>finagle-core: <cite>c.t.f.service.Retries</cite> now supports adding delay between each automatic retry.
This is configured via the <cite>Retries.Budget</cite>. <tt class="docutils literal"><span class="pre">RB_ID=768883</span></tt></li>
<li>finagle-core: FailureAccrualFactory now uses a FailureAccrualPolicy to determine when to
mark an endpoint dead. The default policy, FailureAccrualPolicy.consecutiveFailures(),
mimicks existing functionality, and FailureAccrualPolicy.successRate() operates on the
exponentially weighted average success rate over a window of requests.``RB_ID=756921``</li>
<li>finagle-core: Introduce <cite>c.t.f.transport.Transport.Options</cite> to configure transport-level options
(i.e., socket options <cite>TCP_NODELAY</cite> and <cite>SO_REUSEADDR</cite>). <tt class="docutils literal"><span class="pre">RB_ID=773824</span></tt></li>
<li>finagle-http: <cite>c.t.f.http.exp.Multipart</cite> now supports both in-memory and on-disk file uploads.
<tt class="docutils literal"><span class="pre">RB_ID=RB_ID=769889</span></tt></li>
<li>finagle-netty4: Hello World. Introduce a <cite>Listener</cite> for Netty 4.1. This is still considered beta.
<tt class="docutils literal"><span class="pre">RB_ID=718688</span></tt></li>
<li>finagle-netty4: Introduce <cite>ChannelTransport</cite> for Netty 4.1. <tt class="docutils literal"><span class="pre">RB_ID=763435</span></tt></li>
<li>finagle-thrift: <cite>c.t.f.ThriftRichClient</cite> implementations of <cite>newServiceIface</cite>
method that accept a <cite>label</cite> argument to pass to the <cite>ScopedStats</cite> instance. <tt class="docutils literal"><span class="pre">RB_ID=760157</span></tt></li>
<li>finagle-stats: Added <cite>c.t.f.stats</cite> now has a <cite>statsFilterFile</cite> flag which will read a blacklist
of regex, newline-separated values. It will be used along with the <cite>statsFilter</cite> flag for stats
filtering. <tt class="docutils literal"><span class="pre">RB_ID=764914</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id16">
<h3>Deprecations<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: the #channelFactory method of <cite>c.t.f.builder.ServerBuilder</cite> has been deprecated
in favor of the <cite>c.t.f.netty3.numWorkers</cite> flag. <tt class="docutils literal"><span class="pre">RB_ID=718688</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id17">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: The behavior for <cite>c.t.f.util.DefaultMonitor</cite> has changed such that
unhandled exceptions are propagated to <cite>c.t.u.RootMonitor</cite> except for
<cite>c.t.f.Failures</cite> with a log <cite>Level</cite> below INFO. <tt class="docutils literal"><span class="pre">RB_ID=758056</span></tt></li>
<li>finagle-core: The metrics for requeues <cite>requeue/requeues</cite>, <cite>requeue/budget</cite> and
<cite>requeue/budget_exhausted</cite> have moved under retries. They are now <cite>retries/requeues</cite>,
<cite>retries/budget</cite> and <cite>retries/budget_exhausted</cite>. <tt class="docutils literal"><span class="pre">RB_ID=760213</span></tt></li>
<li>finagle-core: <cite>c.t.f.service.RetryFilter</cite> and <cite>c.t.f.service.RetryExceptionsFilter</cite>
now default to using a <cite>RetryBudget</cite> to mitigate retry amplification on downstream
services. The previous behavior can be achieved by explicitly passing in
<cite>RetryBudget.Infinite</cite>. <tt class="docutils literal"><span class="pre">RB_ID=766302</span></tt></li>
<li>finagle-core: <cite>c.t.f.factory.TrafficDistributor</cite> now suppresses changes when a bound
address is updated from a valid set to an error. Instead, it continues using stale
data until it gets a successful update.</li>
<li>finagle-http: Unhandled exceptions from user defined HTTP services are now converted
into very basic 500 responses so clients talking to those services see standard HTTP
responses instead of a dropped connection. <tt class="docutils literal"><span class="pre">RB_ID=755846</span></tt></li>
<li>finagle-memcached: Moved metrics from underlying <cite>KetamaPartitionedClient</cite> for Memcached clients
to share the same scope of the underlying finagle client. <tt class="docutils literal"><span class="pre">RB_ID=771691</span></tt></li>
<li>finagle-mux: <cite>com.twitter.finagle.mux.ThresholdFailureDetector</cite> is turned on by
default. <tt class="docutils literal"><span class="pre">RB_ID=756213</span></tt></li>
<li>finagle-serversets: The <cite>c.t.f.serverset2.Zk2Resolver</cite> now surfaces <cite>Addr.Pending</cite>
when it detects that its underlying ZooKeeper client is unhealthy. Unhealthy is defined
as non-connected for greater than its &#8216;unhealthyWindow&#8217; (which defaults to 5 minutes).
<tt class="docutils literal"><span class="pre">RB_ID=760771</span></tt></li>
<li>finagle-serversets: The <cite>c.t.f.serverset2.ZkSession</cite> now uses an unbounded semaphore to
limit to 100 outstanding zookeeper requests at any one moment. <tt class="docutils literal"><span class="pre">RB_ID=771399</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id18">
<h3>Breaking API Changes<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>BackupRequestLost</cite> is no longer itself an <cite>Exception</cite>. Use
<cite>BackupRequestLost.Exception</cite> in its place. <tt class="docutils literal"><span class="pre">RB_ID=758056</span></tt></li>
<li>finagle-core: Replaced <cite>c.t.f.builder.ClientConfig.Retries</cite> with
<cite>c.t.f.service.Retries.Policy</cite>. <tt class="docutils literal"><span class="pre">RB_ID=760213</span></tt></li>
<li>finagle-core: A deprecated <cite>c.t.f.CancelledReadException</cite> has been removed.
<tt class="docutils literal"><span class="pre">RB=763435</span></tt></li>
<li>finagle-http: <cite>c.t.f.http.exp.Multipart.decodeNonChunked</cite> has been removed from
the public API. Use <cite>c.t.f.http.Request.multipart</cite> instead. Also
<cite>c.t.f.http.exp.Multipart.FileUpload</cite> is no longer a case class, but base trait
for <cite>Multipart.InMemoryFileUpload</cite> and <cite>Multipart.OnDiskFileUpload</cite>. <tt class="docutils literal"><span class="pre">RB_ID=769889</span></tt></li>
<li>finagle-mux: <cite>c.t.f.FailureDetector.apply</cite> method is changed to private scope,
to reduce API surface area. Using <cite>FailureDetector.Config</cite> is enough to config
session based failure detection behavior. <tt class="docutils literal"><span class="pre">RB_ID=756833</span></tt></li>
<li>finagle-mux: <cite>closeThreshold</cite> in <cite>c.t.f.mux.FailureDetector.ThresholdConfig</cite> is
changed to <cite>closeTimeout</cite>, from an integer that was used as a multiplier to time
duration. This makes it easier to config. <tt class="docutils literal"><span class="pre">RB_ID=759406</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id19">
<h3>Bug Fixes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-thrift: <cite>c.t.f.ThriftRichClient</cite> scoped stats label is now threaded
properly through <cite>newServiceIface</cite> <tt class="docutils literal"><span class="pre">RB_ID=760157</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id20">
<h2>6.30.0<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>New Features<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>com.twitter.finagle.client.LatencyCompensator</cite> allows its
default Compensator value to be set via an API call. This allows
libraries to set defaults for clients that have not configured this module.
<tt class="docutils literal"><span class="pre">RB_ID=750228</span></tt></li>
<li>finagle-core: New Resolver <cite>com.twitter.finagle.FixedInetResolver</cite> extends
InetResolver by caching successful DNS lookups indefinitely. It&#8217;s scheme is &#8216;fixedinet&#8217;.
This is used by clients or resolvers that do not want or expect
host-&gt;ip map changes (such as the zk2 resolver and twemcache client).
<tt class="docutils literal"><span class="pre">RB_ID=753712</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id22">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>RetryPolicy.tries</cite> now uses jittered backoffs instead of
having no delay. <tt class="docutils literal"><span class="pre">RB_ID=752629</span></tt></li>
<li>finagle-core: <cite>FailureAccrualFactory</cite> uses jittered backoffs as the duration
to mark dead for, if <cite>markDeadFor</cite> is not configured. <tt class="docutils literal"><span class="pre">RB_ID=746930</span></tt></li>
<li>finagle-core: The transit latency (transit_latency_ms) and deadline budget
(deadline_budget_ms) stats are now only recorded for servers, not for
clients anymore, since they&#8217;re only meaningful for servers. <tt class="docutils literal"><span class="pre">RB_ID=75268</span></tt></li>
<li>finagle-http: Clients sending requests with payloads larger than the server
accepts (default 5MB) now receive a HTTP 413 response instead of a channel
closed exception.  <tt class="docutils literal"><span class="pre">RB_ID=753664</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id23">
<h3>Breaking API Changes<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>TimerFromNettyTimer</cite> is renamed to <cite>HashedWheelTimer</cite> and
the constructor accepting <cite>org.jboss.netty.util.Timer</cite> made private. For
compatibility, <cite>HashedWheelTimer</cite> has additional constructors to match
those provided by <cite>org.jboss.netty.util.HashedWheelTimer</cite>. <tt class="docutils literal"><span class="pre">RB_ID=748514</span></tt></li>
<li>finagle-httpx / finagle-httpx-compat: Renamed to finagle-http and
finagle-http-compat respectively. This changes the package names, e.g.:
com.twitter.finagle.httpx to com.twitter.finagle.http. <tt class="docutils literal"><span class="pre">RB_ID=751876</span></tt></li>
<li>finagle-core: Marked <cite>HandletimeFilter</cite> private[finagle], and renamed it to
<cite>ServerStatsFilter</cite>. <tt class="docutils literal"><span class="pre">RB_ID=75268</span></tt></li>
<li>finagle-zipkin: Drop <cite>c.t.zipkin.thrift.Annotation.duration</cite> and associated thrift field
<cite>c.t.f.thrift.thrift.Annotation.duration</cite>. <tt class="docutils literal"><span class="pre">RB_ID=751986</span></tt></li>
<li>finagle-stress: Project has been removed from Finagle. <tt class="docutils literal"><span class="pre">RB_ID=752201</span></tt></li>
<li>finagle-swift: Project has been moved off of Finagle to
<a class="reference external" href="https://github.com/finagle/finagle-swift">https://github.com/finagle/finagle-swift</a> . <tt class="docutils literal"><span class="pre">RB_ID=752826</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id24">
<h2>6.29.0<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>Deprecations<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-http: Deprecated in favour of finagle-httpx and now removed.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id26">
<h3>New Features<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Provides a <cite>RetryFilter</cite> which takes a
<cite>RetryPolicy[(Req, Try[Rep])]</cite> and allows you to retry on both &#8220;successful&#8221;
requests, such as HTTP 500s, as well as failed requests. The <cite>Req</cite>
parameterization facilitates using the request to determine if retrying is
safe (i.e. the request is idempotent).</li>
<li>finagle-httpx: Experimental support <cite>multipart/form-data</cite> (file uploads)
decoding via <cite>c.t.f.httpx.exp.Multipart</cite>. <tt class="docutils literal"><span class="pre">RB_ID=730102</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id27">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>InetResolver.bind</cite> will now succeed if any hostname resolution
succeeds. Previous behavior required that all hosts are successfully resolved.
<tt class="docutils literal"><span class="pre">RB_ID=737748</span></tt></li>
<li>finagle-core: DNS lookups in InetResolver are no longer cached
within Finagle according to <cite>networkaddress.cache.ttl</cite>; we rely
instead on however caching is configured in the JVM and OS. <tt class="docutils literal"><span class="pre">RB_ID=735006</span></tt></li>
<li>finagle-core: After being revived, a <cite>FailureAccrualFactory</cite> enters a
&#8216;probing&#8217; state wherein it must successfully satisfy a request before
accepting more. If the request fails, it waits for the next <cite>markDeadFor</cite>
period. <tt class="docutils literal"><span class="pre">RB_ID=747541</span></tt></li>
<li>finagle-serversets: DNS lookups in Zk2Resolver are no longer
cached within Finagle according to <cite>networkaddress.cache.ttl</cite>;
instead they are cached indefinitely. <tt class="docutils literal"><span class="pre">RB_ID=735006</span></tt></li>
<li>finagle-redis: c.t.f.Redis now uses a pipelined dispatcher along with
a concurrent load balancer to help eliminate head-of-line blocking.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id28">
<h3>Breaking API Changes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>RetryingFilter</cite>, which takes a RetryPolicy[Try[Nothing]]` and
is invoked only on exceptions, has been renamed to <cite>RetryExceptionsFilter</cite>.
<cite>RetryExceptionsFilter</cite> is a subclass of <cite>RetryFilter</cite>, which takes a
<cite>RetryPolicy[(Req, Try[Rep])]</cite> and allows you to retry on both &#8220;successful&#8221;
requests, such as HTTP 500s, as well as failed requests. The <cite>Req</cite>
parameterization facilitates using the request to determine if retrying is
safe (i.e. the request is idempotent).</li>
<li>finagle-core: Name.all is now private to <cite>com.twitter.finagle</cite>.</li>
<li>finagle-memcached: Unified stack-based construction APIs and cleanup internal
constructors. In particular, <cite>KetamaClient</cite> was removed and <cite>KetamaPartitionClient</cite>
and <cite>KetamaFailureAccrualFactory</cite> are now sealed inside Finagle. See
[[com.twitter.finagle.Memcached]] for how to construct a finagle-memcached client.</li>
<li>finagle-redis: Port the c.t.f.Redis protocol object to the StackClient API.
A redis client can now be constructed and configured like the rest of the
finagle subprojects.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id29">
<h2>6.28.0<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id30">
<h3>New Features<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id31">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Weights are no longer supported by the load balancers. They are moved
one level above and interpreted by a new module, the <cite>TrafficDistributor</cite>. This
frees the balancers to have non-linear load metrics. It also changes the semantics
of weights. They are now normalized by size of endpoints that share the same weight
and interpreted proportional to offered load (however, they can still be though of,
roughly, as multipliers for traffic). <tt class="docutils literal"><span class="pre">RB_ID=677416</span></tt></li>
<li>finagle-core: The RequestSemaphoreFilter now sheds load by dropping the tail of the queue
and failing it with a <cite>Failure.Restartable</cite>. Previously, the filter had an unbounded
queue but now the default size is 0 (i.e. no queueing). The dropped requests are in
turn requeued by Finagle clients with protocol support (e.g. Http, ThriftMux).
<tt class="docutils literal"><span class="pre">RB_ID=696934</span></tt></li>
<li>finagle-core: <cite>ServerBuilder.ServerConfig.BindTo</cite>, <cite>ServerBuilder.ServerConfig.MonitorFactory</cite>,
and <cite>ServerBuilder.ServerConfig.Daemonize</cite>, are now private to <cite>com.twitter.finagle.builder</cite>. <tt class="docutils literal"><span class="pre">RB_ID=730865</span></tt></li>
<li>finagle-memcachedx: Renamed to finagle-memcached.</li>
<li>finagle-stats: Standard deviation (&#8220;$statName.stddev&#8221;) is no longer exported.
<tt class="docutils literal"><span class="pre">RB_ID=726309</span></tt> (follow up to <tt class="docutils literal"><span class="pre">RB_ID=717647</span></tt>)</li>
<li>finagle-serversets: <cite>namer/bind_latency_us</cite> stat now counts only
time in name resolution, not service acquisition.
<cite>namer/{dtabcache,namecache,nametreecache}/misstime_ms</cite> stats are
no longer exported. <tt class="docutils literal"><span class="pre">RB_ID=730309</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id32">
<h3>Breaking API Changes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.jsr166y</cite> has been replaced with Java 7 API. finagle: Replace JSR166y
with Java 7 API. <tt class="docutils literal"><span class="pre">RB_ID=720903</span></tt></li>
<li>finagle-core: <cite>LoadBalancerFactory</cite> no longer takes endpoints with weights as
per the decoupling mentioned in runtime changes. <tt class="docutils literal"><span class="pre">RB_ID=677416</span></tt></li>
<li>finagle-core: <cite>RequestSemaphoreFilter.Param</cite> now accepts a <cite>com.twitter.concurrent.AsyncSemaphore</cite>
instead of an integer representing the max concurrency. <tt class="docutils literal"><span class="pre">RB_ID=696934</span></tt></li>
<li>finagle-core: removed <cite>c.t.f.asyncDns</cite> flag and <cite>c.t.f.SyncInetResolver</cite>; DNS resolution is
now always asynchronous. <tt class="docutils literal"><span class="pre">RB_ID=734427</span></tt></li>
<li>finagle-core: <cite>ClientBuilder.ClientConfig.DefaultParams</cite>, <cite>ClientBuilder.ClientConfig.DestName</cite>,
<cite>ClientBuilder.ClientConfig.GlobalTimeout</cite>, <cite>ClientBuilder.ClientConfig.Daemonize</cite>, and
<cite>ClientBuilder.ClientConfig.MonitorFactory</cite> are now private to <cite>com.twitter.finagle.builder</cite>.
<cite>ClientBuilder.ClientConfig.Retries</cite> is now private to <cite>com.twitter</cite>. <tt class="docutils literal"><span class="pre">RB_ID=727245</span></tt></li>
<li>finagle-httpx: <cite>Method</cite> no longer has an extractor. To access the name of
custom methods, use <cite>toString</cite>. <tt class="docutils literal"><span class="pre">RB_ID=722913</span></tt></li>
<li>finagle-mux: <cite>c.t.f.mux.exp.FailureDetector</cite> and <cite>c.t.f.mux.exp.sessionFailureDetector</cite> are
moved out of exp package into mux package. <tt class="docutils literal"><span class="pre">RB_ID=725350</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id33">
<h2>6.27.0<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id34">
<h3>New Features<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-http: Support nacks between Finagle Http clients and servers. When a server fails
with retryable exceptions (exceptions wrapped by <cite>Failure.rejected</cite>), it sends back a &#8220;Nack&#8221;
response, i.e. 503 Response code with a new &#8220;finagle-http-nack&#8221; header. This allows clients
to safely retry failed requests, and keep connections open. <tt class="docutils literal"><span class="pre">RB_ID=705948</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id35">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: FailFast parameter renamed from <cite>onOrOff</cite> to <cite>enabled</cite>. <tt class="docutils literal"><span class="pre">RB_ID=720781</span></tt></li>
<li>finagle-core: When evaluating NameTree unions, return components of the union in Ok state rather
than waiting for all components to be Ok. This enables resilience of unions when part of the
tree cannot be resolved. <tt class="docutils literal"><span class="pre">RB_ID=697114</span></tt></li>
<li>finagle-stats: Standard of deviation is no longer calculated. It is exported as a constant 0.0
for &#8220;$statName.stddev&#8221;. <tt class="docutils literal"><span class="pre">RB_ID=717647</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id36">
<h3>Breaking API Changes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-stream: Introduce StreamRequest as a replacement for Netty&#8217;s
HttpRequest, and converted the rest of the public API to not leak
other Netty types (notably ChannelBuffer is replaced by Buf). <tt class="docutils literal"><span class="pre">RB_ID=695896</span></tt></li>
<li>finagle-core: Dtab does not implement the Namer interface anymore. Use
<cite>c.t.f.naming.DefaultInterpreter</cite> to bind a name via a Dtab. Support for Dtab entries starting
with /#/ has been removed. <cite>c.t.f.Namer.bindAndEval</cite> has been removed. Use
<cite>c.t.f.Namer.resolve</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=711681</span></tt></li>
<li>finagle: <cite>LoadService</cite> and <cite>ThriftRichClient</cite> migrated off of deprecated <cite>ClassManifest</cite>
to <cite>ClassTag</cite>. <tt class="docutils literal"><span class="pre">RB_ID=720455</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id37">
<h2>6.26.0<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id38">
<h3>Deprecations<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-memcached: Deprecated in favor of finagle-memcachedx and now removed.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id39">
<h3>New Features<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-httpx: Support nacks between Finagle Http clients and servers. When a server fails
with retryable exceptions (exceptions wrapped by <cite>Failure.rejected</cite>), it sends back a &#8220;Nack&#8221;
response, i.e. 503 Response code with a new &#8220;finagle-http-nack&#8221; header. This allows clients
to safely retry failed requests, and keep connections open. <tt class="docutils literal"><span class="pre">RB_ID=670046</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id40">
<h3>Breaking API Changes<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Moved netty3 specific things into a netty3 namespace. For
these symbols, the namespace translation follows this pattern:
<cite>c.t.f.$MODULE._ =&gt; c.t.f.netty3.$MODULE._.</cite> <tt class="docutils literal"><span class="pre">RB_ID=691746</span></tt></li>
<li>finagle-core: Define <cite>WeightedSocketAddress</cite> as a case class. Add
<cite>WeightedSocketAddress.extract</cite> method to extract weight. <tt class="docutils literal"><span class="pre">RB_ID=614228</span></tt></li>
<li>finagle-core: Constructing a new Balancer that can be injected into a Finagle client
was unnecessarily complex and non-uniform. We removed the legacy constructors around
defining the collection of endpoints and simplified the interface to <cite>LoadBalancerFactory</cite>.
Now, <cite>com.twitter.finagle.loadbalancer.Balancers</cite> defines the collection of balancer
constructors. <tt class="docutils literal"><span class="pre">RB_ID=660730</span></tt></li>
<li>finagle-core: Aperture can no longer be enabled via command line flags. Configuring
per-client settings globally is generally not a good idea and we&#8217;re working to remove
these flags from Finagle. Use the constructors in <cite>com.twitter.finagle.loadbalancer.Balancers</cite>
to create an instance that can be injected into a client. <tt class="docutils literal"><span class="pre">RB_ID=663194</span></tt></li>
<li>finagle-core: The default load balancer has changed to p2c from heap. <tt class="docutils literal"><span class="pre">RB_ID=693450</span></tt></li>
<li>finagle-core: <cite>Service.isAvailable</cite> and <cite>ServiceFactory.isAvailable</cite> is finalized.
<cite>Service.status</cite> and <cite>ServiceFactory.status</cite> supersedes <cite>isAvailable</cite> usage since 6.24.0 release.
<tt class="docutils literal"><span class="pre">RB_ID=678588</span></tt></li>
<li>finagle-core: <cite>ClientBuilder.failureAccrual</cite> method is removed. Use <cite>ClientBuilder.failureAccrualFactory</cite>
instead. <tt class="docutils literal"><span class="pre">RB_ID=689076</span></tt></li>
<li>finagle-core: Stack param <cite>ClientBuilder.ClientConfig.FailureAccrualFac</cite> is removed.
Use <cite>ClientBuilder.failureAccrualFactory</cite> instead. <tt class="docutils literal"><span class="pre">RB_ID=689076</span></tt></li>
<li>finagle-exception: <cite>com.twitter.finagle.exception.ExceptionReporter</cite> is no longer used
as the default <cite>com.twitter.finagle.util.ReporterFactory</cite>. <tt class="docutils literal"><span class="pre">RB_ID=674646</span></tt></li>
<li>finagle-kestrel: Replace deprecated finagle-kestrel package with finagle-kestrelx.
<tt class="docutils literal"><span class="pre">RB_ID=667920</span></tt></li>
<li>finagle-core: Add new method <cite>noFailureAccrual</cite> on <cite>ClientBuilder</cite> that completely disables
<cite>FailureAccrualFactory</cite> in the underlying stack. <tt class="docutils literal"><span class="pre">RB_ID=689076</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id41">
<h3>New Features<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>finagle-thrift: Support for finagle Services per thrift method.</li>
</ul>
</div>
</div>
<div class="section" id="id42">
<h2>6.25.0<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id43">
<h3>Breaking API Changes<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.builder.Server</cite> now implements <cite>c.t.f.ListeningServer</cite>.</li>
<li>finagle-core: <cite>c.t.f.Server.serveAndAnnounce</cite> with a <cite>ServiceFactory</cite> had
its first argument renamed to <cite>name</cite> from <cite>forum</cite>.</li>
<li>finagle-core: Add an attribute map to <cite>c.t.f.Addr.Bound</cite>.</li>
<li>finagle-core: <cite>c.t.f.builder.ClientConfig.FailFast</cite> has moved to
<cite>c.t.f.FailFastFactory.FailFast</cite>.</li>
<li>finagle-core: NoBrokersAvailableException now has two Dtab constructor
arguments, both the base and local Dtabs.</li>
<li>finagle-core: <cite>c.t.f.Failure</cite> convenience constructors (e.g., <cite>Failure.Cause</cite>,
<cite>Failure.Rejected</cite>) were removed in favor of uniform flag treatment, and clean
separation of attributes from interpretation of those attributes.</li>
<li>finagle-core: <cite>ExitGuard</cite> usage is now private to finagle.</li>
<li>finagle-core: <cite>c.t.f.service.TimeoutFilter.module</cite> is now split into
<cite>TimeoutFilter.clientModule</cite> and <cite>TimeoutFilter.serverModule</cite>.</li>
<li>finagle-core: remove deprecated <cite>c.t.f.builder.ClientBuilder.stack</cite> taking a
<cite>Stack.Params =&gt; Client[Req1, Rep1]</cite>.</li>
<li>finagle-core: StackRegistry.Entry takes different constructor arguments, and the
name has been bundled in with the Stack.Params.  StackRegistry.Entry is only used
internally, so this should be relatively inexpensive.  Similarly, StackRegister#register
has also had a small change to its method signature along the same lines.</li>
<li>finagle-http: deprecated methods in <cite>c.t.f.http.HttpMessageProxy</cite> have been removed.</li>
<li>finagle-memcached / finagle-memcachedx: move TwitterCacheResolver
and related objects to new finagle-cacheresolver package.</li>
<li>finagle-memcached / finagle-memcachedx: failureAccrual param in ReplicationClient
is changed from type (Int, Duration) to (Int, () =&gt; Duration), to allow flexibility
to config duration. Also see <cite>markDeadFor</cite> change in finagle-core in the &#8220;New Features&#8221;
section below.</li>
<li>finagle-memcached / finagle-memcachedx: MigrationClientTest now uses
ServerCnxnFactory from com.twitter.zk rather than NIOServerCnxn.Factory from
org.apache.zookeeper.server.</li>
<li>finagle-mux: <cite>c.t.f.mux.RequestNackedException</cite> is removed in favor of a standard
Failure (<cite>c.t.f.Failure.Rejected</cite>).</li>
<li>finagle-ostrich4: Switched dependency to finagle-httpx from finagle-http.</li>
<li>finagle-serversets: ZkInstance in tests now uses ServerCnxnFactory from
com.twitter.zk rather than NIOServerCnxn.Factory from
org.apache.zookeeper.server.</li>
<li>finagle-stats: Switched dependency to finagle-httpx from finagle-http.</li>
<li>finagle-mysql: PreparedStatements are now more type-safe! The type signature of
PreparedStatements has changed from Seq[Any] =&gt; Future[Result] to Seq[Parameter] =&gt;
Future[Result]. Parameter represents objects that are serializable by finagle-mysql.
In most cases, scalac should transparently wrap your arguments in Parameter when
applying a PreparedStatement. However, in cases where this doesn&#8217;t happen you
can explicitly wrap them using <cite>Parameter.wrap</cite>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id44">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>com.twitter.finagle.service.StatsFilter</cite> no longer requires a
<cite>com.twitter.finagle.stats.RollupStatsReceiver</cite> for correct behaviour, and
providing one will double count failures.</li>
<li>finagle-core: <cite>com.twitter.finagle.factory.TimeoutFactory</cite> will fail with
a retryable <cite>com.twitter.finagle.Failure</cite> when it times out.</li>
<li>finagle-core: <cite>com.twitter.finagle.pool.WatermarkPool</cite> will fail with
an interrupted <cite>com.twitter.finagle.Failure</cite> when it is interrupted while
waiting or trying to establish a connection.  It has previously failed with
a <cite>com.twitter.finagle.WriteException</cite> when trying to establish a
connection, but it&#8217;s incorrect to retry on an interruption.</li>
<li>finagle-core: <cite>com.twitter.fiangle.RetryPolicy</cite>&#8216;s <cite>RetryableWriteException</cite>
and <cite>WriteExceptionsOnly</cite> will not retry on <cite>com.twitter.finagle.Failure`s
that are marked `InterruptedBy</cite>, even if they are <cite>Retryable</cite>.</li>
<li>finagle-core: The error message provided by <cite>c.t.f.NoBrokersAvailableException</cite>
prints both the base and local Dtabs.</li>
<li>finagle-core: Stats produced by <cite>com.twitter.finagle.factory.BindingFactory</cite>
are now scoped with the &#8220;namer&#8221; prefix rather than &#8220;interpreter&#8221;. The total
latency associated with Name binding is now recorded in the &#8220;bind_latency_ms&#8221;
stat.</li>
<li>finagle-core: The &#8220;service_creation/service_acquisition_latency_ms&#8221; stat
produced by <cite>com.twitter.finagle.factory.StatsFactoryWrapper</cite> no longer
includes time spent in name resolution, which is now covered by
&#8220;namer/bind_latency_us&#8221; as discussed above.</li>
<li>finagle-core: added transit_latency_ms and deadline_budget_ms stats.</li>
<li>finagle-core: Automatic retries (requeues) are now credited as a ratio of
requests over a window of time, instead of a fixed limit. The stats scope
has also changed from &#8220;automatic&#8221; to &#8220;requeues&#8221;.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id45">
<h3>Deprecations<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.builder.Server.localAddress</cite> is deprecated in favor of
<cite>c.t.f.ListeningServer.boundAddress</cite>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id46">
<h3>New Features<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">finagle-core: <a class="reference external" href="https://twitter.github.io/finagle/guide/FAQ.html#why-do-clients-see-com-twitter-finagle-failedfastexception-s">Fail fast</a>
is now <a class="reference external" href="https://twitter.github.io/finagle/guide/FAQ.html#configuring-finagle6">configurable</a>
on Stack-based clients via the <cite>com.twitter.finagle.FailFastFactory.FailFast</cite> param.</p>
</li>
<li><p class="first">finagle-core: <cite>com.twitter.finagle.service.StatsFilter</cite> is now configurable with an
<cite>com.twitter.finagle.stats.ExceptionStatsHandler</cite> to customize how failures are recorded.</p>
</li>
<li><p class="first">finagle-core: It should be safe to match on <cite>com.twitter.finagle.Failure.InterruptedBy</cite>
to tell if a <cite>com.twitter.util.Future</cite> failed due to being interrupted.</p>
</li>
<li><p class="first">finagle-core: <cite>markDeadFor</cite> in c.t.f.service.FailureAccrualFactory.Param is changed from
Duration type to () =&gt; Duration. So it&#8217;s flexible for clients to pass in a function that
specifies Duration. For example, c.t.f.service.FailureAccrualFactory provides a function
that adds perturbation in durations. Stack-based API and c.t.f.builder.ClientBuilder
support both types for client configuration. For example,</p>
<div class="highlight-text"><div class="highlight"><pre>Thrift.client.configured(FailureAccrualFactory(5, () =&gt; 1.seconds))
// or
Thrift.client.configured(new FailureAccrualFactory(5, 1.seconds)).
</pre></div>
</div>
<p>c.t.f.client.DefaultClient does not support Duration type in failureAccrual anymore.</p>
</li>
<li><p class="first">finagle-core: improved Java compatiblity for <cite>c.t.f.Stack.Params</cite> / <cite>c.t.f.Stack.Parameterized</cite>.</p>
</li>
<li><p class="first">finagle-core: Introduce the ability to add metadata to bound <cite>com.twitter.finagle.Addr</cite>s.</p>
</li>
<li><p class="first">finagle-core: Introduce per-address latency compensation.  Clients may be configured with
a &#8216;Compensator&#8217; function that uses the client&#8217;s address metadata to adjust connection and
request timeouts.  This can be used, for instance, to account for speed-of-light latency
between physical regions.</p>
</li>
<li><p class="first">finagle-core: Introduce per-address stats scoping.  Clients may be configured with
a <cite>com.twitter.finagle.client.StatsScoping.Scoper</cite> function that uses the client&#8217;s
address metadata to adjust the scope of client stats. This can be used, for instance,
to properly scope client stats for a Name that resolves to a Union of distinct clusters.</p>
</li>
<li><p class="first">finagle-core: A convenient method <cite>Client.newService(dest: String, label: String)</cite> was added.</p>
</li>
<li><p class="first">finagle-core: ExitGuard now has an &#8216;explainGuards&#8217; method to provide a human-readable
description of exit guards that are still active.</p>
</li>
<li><p class="first">finagle-http(x): Two missing params were added: <cite>Decompression</cite> and <cite>CompressionLevel</cite>. Both
client and server may be configured with either <cite>configured</cite> method or <cite>withDecompression</cite>/
<cite>withCompressionLevel</cite>.</p>
</li>
<li><p class="first">finagle-mysql: Add support for MySQL transactions.</p>
</li>
<li><p class="first">finagle-stats: A new HostStatsReceiver type is added and used for per host stats.
It is loaded through LoadService and used by the Stack-based API as a default
param. Per host stats can be turned on through <cite>com.twitter.finagle.loadbalancer.perHostStats</cite>
flag, and is exported to the &#8220;/admin/per_host_metrics.json&#8221; route in twitter-server.</p>
</li>
<li><p class="first">finagle-stats: Improved compatibility when migrating from
<a class="reference external" href="https://github.com/twitter/ostrich/">Ostrich</a> stats via two flags:
<tt class="docutils literal"><span class="pre">com.twitter.finagle.stats.useCounterDeltas=true</span></tt> and
<tt class="docutils literal"><span class="pre">com.twitter.finagle.stats.format=ostrich</span></tt>. If these flags are both set,
HTTP requests to <tt class="docutils literal"><span class="pre">/admin/stats.json</span></tt> with the <tt class="docutils literal"><span class="pre">period=60</span></tt> query string
parameter will replicate Ostrich&#8217;s behavior by computing deltas on counters
every minute and formatting histograms with the same labels Ostrich uses.</p>
</li>
<li><p class="first">finagle-memcached(x): Add <cite>c.t.f.memcached.Memcached</cite> which provides a Stack
based Memcache client that uses pipelining.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id47">
<h3>Bug Fixes<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.Server.serveAndAnnounce</cite> for a <cite>Service</cite> had its usage
of <cite>name</cite> and <cite>addr</cite> transposed.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="miscellaneous-cleanup">
<h3>Miscellaneous Cleanup<a class="headerlink" href="#miscellaneous-cleanup" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-protobuf: Move entire unused subproject to the <a class="reference external" href="https://github.com/finagle/finagle-protobuf">Finagle
organization on GitHub</a>.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id48">
<h2>6.24.0<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id49">
<h3>Breaking API Changes<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">finagle-core: Remove <cite>c.t.f.client.StackClient.Role.loadBalancer</cite>, which
was unused and duplicated by <cite>c.t.f.loadbalancer.LoadBalancerFactory.role</cite>.</p>
</li>
<li><p class="first">finagle-core: <cite>c.t.f.Namer.orElse</cite> was removed; composing Namers
may be accomplished by constructing an appropriate Dtab.</p>
</li>
<li><p class="first">finagle-core: removed experimental <cite>enum</cite> / <cite>expand</cite> from
<cite>c.t.f.Namer</cite> and <cite>alt</cite> / <cite>union</cite> from <cite>c.t.f.Dtab</cite>.</p>
</li>
<li><p class="first">finagle-http: Remove <cite>c.t.f.http.CheckRequestFilter</cite> along with
<cite>c.t.f.http.CheckHttpRequestFilter</cite>. The functionality has been
added to <cite>c.t.f.http.codec.HttpServerDispatcher</cite>. In addition,
the codecError in <cite>c.t.f.http.BadHttpRequest</cite> has been replaced
with the exception thrown by the HttpServerCodec.</p>
</li>
<li><p class="first">finagle-httpx: Remove deprecated code, limited scope of access on internal
classes.</p>
</li>
<li><p class="first">finagle-mux: <cite>c.t.f.mux.lease.exp.WindowedByteCounter</cite> no longer
calls <cite>Thread.start()</cite> in its constructor. This should be now be
done by the caller.</p>
</li>
<li><p class="first">finagle-mux: The experimental session API is discontinued.</p>
</li>
<li><p class="first">finagle-mux: Introduce new Request and Response types for mux services.
The new mux request includes a <cite>destination</cite> path so that, which corresponds
to the <cite>destination</cite> field in Tdispatch requests. Furthermore, these new
types expose <cite>c.t.io.Buf</cite> instead of Netty&#8217;s ChannelBuffers.</p>
</li>
<li><p class="first">finagle-thrift,finagle-thriftmux: <cite>c.t.f.Thrift.Client</cite>, <cite>c.t.f.Thrift.Server</cite>,
<cite>c.t.f.ThriftMux.Client</cite> and <cite>c.t.f.ThriftMux.Server</cite> have their
<cite>TProtocolFactory</cite> configured via a <cite>c.t.f.thrift.param.ProtocolFactory</cite>
<cite>Stack.Param</cite>.</p>
</li>
<li><p class="first">finagle-thriftmux: <cite>c.t.f.ThriftMux.Client</cite> now has its <cite>ClientId</cite>
configured via a <cite>c.t.f.thrift.param.ClientId</cite> <cite>Stack.Param</cite>.</p>
</li>
<li><p class="first">Traces (<tt class="docutils literal"><span class="pre">com.twitter.finagle.tracing.Trace</span></tt>) lose their local-state mutating methods:
<tt class="docutils literal"><span class="pre">Trace.clear</span></tt>, <tt class="docutils literal"><span class="pre">Trace.pushId</span></tt>, <tt class="docutils literal"><span class="pre">Trace.setId</span></tt>, <tt class="docutils literal"><span class="pre">Trace.setTerminalId</span></tt>, <tt class="docutils literal"><span class="pre">Trace.pushTracer</span></tt>,
<tt class="docutils literal"><span class="pre">Trace.pushTracerAndSetNextId</span></tt>,
<tt class="docutils literal"><span class="pre">Trace.state_=</span></tt>, and <tt class="docutils literal"><span class="pre">Trace.unwind</span></tt>.
Let-bound versions of these are introduced in their stead.
This makes it simple to ensure that state changes are properly delimited;
further, these are always guaranteed to be delimited properly by Finagle.</p>
<div class="highlight-text"><div class="highlight"><pre>Trace.setTracer(tracer)
codeThatUsesTracer()

// Let-bound version:
Tracer.letTracer(tracer) {
  codeThatUsesTracer()
}
</pre></div>
</div>
</li>
<li><p class="first">Context handlers (<tt class="docutils literal"><span class="pre">com.twitter.finagle.Context</span></tt>) are removed.
They are replaced by the use of marshalled request contexts
(<tt class="docutils literal"><span class="pre">com.twitter.finagle.context.Contexts.broadcast</span></tt>).
Marshalled request contexts do not require the use of service loading,
so their use no longer requires build system coordination.
We show Finagle&#8217;s trace context:
the first version uses the old context handler mechanism;
the second uses <tt class="docutils literal"><span class="pre">Contexts.broadcast</span></tt>.</p>
<div class="highlight-text"><div class="highlight"><pre>// The old context handler for Finagle&#39;s tracing context. Note that this
// also required the file
// finagle-core/src/main/resources/META-INF/services/com.twitter.finagle.ContextHandler
// to contain the fully qualifed class path of the below object.
class TraceContext extends ContextHandler {
  val key = Buf.Utf8(&quot;com.twitter.finagle.tracing.TraceContext&quot;)

  def handle(body: Buf) {
    // Parse &#39;body&#39; and mutate the trace state accordingly.
  }

  def emit(): Option[Buf] = {
    // Read the trace state and marshal to a Buf.
  }
}

// New definition. No service loading required.
private[finagle] val idCtx = new Contexts.broadcast.Key[TraceId] {
  val marshalId = Buf.Utf8(&quot;com.twitter.finagle.tracing.TraceContext&quot;)

  def marshal(id: TraceId): Buf = {
    // Marshal the given trace Id
  }

  def tryUnmarshal(body: Buf): Try[TraceId] = {
    // Try to marshal &#39;body&#39; into a trace id.
  }
}
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id50">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-mux: Mark the ServiceFactory available again if the underlying
Service is no longer available.  This permits it to be closed and reused.</li>
<li>finagle-mux: Rename the &#8220;lease_counter&#8221; counter to &#8220;leased&#8221; on mux clients.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id51">
<h3>Deprecations<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Deprecated the mechanisms of FailureAccrual that use
factory Transformers.  It&#8217;s better to just use the Params to
configure the existing FailureAccrualFactory.  However, if you&#8217;ve
actually written your own failure accrual transformer that&#8217;s
significantly different, then you can do stack.replace() to swap it
in.</li>
<li>finagle-memcached: Have cas() operation return false on NotFound()
state instead of throw IllegalStateException</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id52">
<h3>New Features<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: All <cite>Stack.Param`s used in `ClientBuilder</cite> and
<cite>ServerBuilder</cite> are now publicly exposed for configuration
parity.</li>
<li>finagle-mux: Drain mux servers properly, so that shutdowns can be
graceful.</li>
<li>finagle-core: Introduce <cite>Service.status</cite> which supersedes
<cite>Service.isAvailable</cite>. <cite>Service.status</cite> is a fine-grained
health indicator. The default definition of
<cite>Service.isAvailable</cite> is now defined in terms of
<cite>Service.status</cite>; this definition will soon be made
final.</li>
<li>finagle-mux: Inject bound residual paths into mux requests.</li>
<li><em>Request contexts.</em> Request contexts replace the direct use of
com.twitter.util.Local and of com.twitter.finagle.Context.
Request contexts are environments of request-local bindings;
they are guaranteed to be delimited by Finagle,
and their API admits only properly delimited binding.
They come in two flavors:
Contexts.local are always local to handling a single request;
bindings in Contexts.broadcast may be marshalled and transmitted across process
boundaries where there is protocol support.
Currently, both Thrift and Mux (and thus also ThriftMux)
support marshalled contexts.
See <cite>com.twitter.finagle.contexts.Context</cite> for more details.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id53">
<h2>6.23.0<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id54">
<h3>Breaking API Changes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: <cite>c.t.f.Stackable`s maintained state about which parameters were
accessed via `get</cite>. This was error prone and violated the assumption that <cite>Stack`s
are immutable data structures. We removed this in favor of annotating modules with
parameters. The abstract classes for Stackables were also simplified. Now we only have
`Module</cite> and <cite>ModuleN</cite> variants which are more convenient for most definitions.
Since this is an advanced API, it should not impact standard usage of finagle.</li>
<li>finagle-core: Update ConcurrentRingBuffer to use ClassTag instead of ClassManifest;
rename size argument to capacity.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id55">
<h3>Deprecations<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><cite>ServerBuilder.stack[Req1, Rep1](mk: Stack.Params =&gt; Server[Req1, Rep1])</cite> is
deprecated in favor of
<cite>ServerBuilder.stack[Req1, Rep1](server: Stack.Parameterized[Server[Req1, Rep1]])</cite></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id56">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><cite>finagle</cite>: Improve allocation semantics for uses of Buf.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id57">
<h2>6.22.0<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Breaking API Changes<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Removed unused <cite>com.twitter.finagle.service.ProxyService</cite>. It wasn&#8217;t
sufficiently general to be used outside of finagle, and was no longer used
in finagle.</li>
<li>Removed TLSEngine, and replaced it with two, TLSClientEngine, and
TLSServerEngine, where TLSServerEngine is the same as TLSEngine, and
TLSClientEngine takes a SocketAddress instead of (). Additionally,
the Netty3TransporterTLSConfig now takes a function SocketAddress =&gt; Engine,
instead of () =&gt; Engine.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id59">
<h3>New Features<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: BroadcastStatsReceiver, introduce specialized implementation</li>
<li>finagle-core: Introduce gauges in SummarizingStatsReceiver</li>
<li>finagle-core: Introduce Transport#copyToWriter</li>
<li>finagle-core: Make base Dtab used in BindingFactory a Stack.Param</li>
<li>finagle-core: Proper decay in experimental ewma load metric</li>
<li>finagle-core: Simplify Stack{Client, Server} and unify around them</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id60">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Add support for non-URLClassloaders to LoadService</li>
<li>finagle-core: clear locals before entering server dispatch loop</li>
<li>finagle-core: Defer DNS Resolution in InetResolver to FuturePool</li>
<li>finagle-core: for paths starting with /#/, skip rewrites where prefix is /</li>
<li>finagle-core: include name resolution in tracing request span</li>
<li>finagle-core: Properly wrap some IOException into ConnectionFailedException</li>
<li>finagle-core: Scope InetResolver&#8217;s stats properly</li>
<li>finagle-http: Send &#8220;Connection: close&#8221; header while dispatcher is closing</li>
<li>finagle-http: Set content length header when appropriate</li>
<li>finagle-memcached: Use interruptible future for the client request readiness</li>
<li>finagle-stats: Add content-type response header to JsonExporter</li>
<li>finagle-thrift: Add back connection_preparation_latency stat in Thrift</li>
<li>finagle-thriftmux: Record protocol as a gauge rather than a counter</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Add Scaladocs for ChannelBufferBuf and BufChannelBuffer</li>
<li>finagle-core: link to the FAQ in FailedFastException</li>
<li>finagle-serversets: Defer DNS resolution for endpoints to InetResolver</li>
<li>finagle-thrift{,mux}: Clarified with* deprecation warning</li>
<li>Fix minor issues and missing code blocks in Finagle documentation</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="optimization">
<h3>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: GlobalFlag isn&#8217;t caching the property value</li>
<li>finagle-core: recursive-descent Path / NameTree / Dentry / Dtab parsers to reduce heap allocation</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id61">
<h3>Bug Fixes<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>finagle-core: Fix a deadlock in Contexts</li>
<li>finagle-core: Fix breaking ABI change in SummarizingStatsReceiver</li>
<li>finagle-core: Fix bug in computing array index in SummarizingStatsReceiver</li>
<li>finagle-core: Fix build.properties location for maven builds</li>
<li>finagle-core: Fix synchronization in LeasedFactory</li>
<li>finagle-core: Fix tracing with Stack{Client, Server}</li>
<li>finagle-core: Make FailedFastException an instance variable.</li>
<li>finagle-core: Synchronized access to the Stackable mutable.params map</li>
<li>finagle-http: Fix CookieMap.rewriteCookieHeaders()</li>
<li>finagle-http: Fix the memory leak in HttpClientDispatcher</li>
<li>finagle-mysql: Fix timestamp fractional seconds encoding</li>
<li>finagle-mysql: Properly heed timezone when extracting TimestampValue</li>
<li>mux: clear contexts after receive, not in &#8216;finally&#8217; clause</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id62">
<h2>6.21.0<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: Upgrade to scala_2.10</li>
<li><cite>finagle-core</cite>: Add weighted address support to InetResolver.</li>
<li><cite>finagle-core</cite>: Adds ClientRegistry.expAllRegisteredClientsResolved</li>
<li><cite>finagle-core</cite>: Attach Dtab.local to NoBrokersAvailableException in filter</li>
<li><cite>finagle-core</cite>: Attempt to add dtab stats to all clients and servers</li>
<li><cite>finagle-core</cite>: Avoid SOCKS proxy for both loopback and link-local addresses</li>
<li><cite>finagle-core</cite>: Bind names lazily under Alt so we don&#8217;t do needless lookups</li>
<li><cite>finagle-core</cite>: DelayedFactory to detachable implementation</li>
<li><cite>finagle-core</cite>: Fix a race in load balancer initialization</li>
<li><cite>finagle-core</cite>: Improve loadbalancer logging</li>
<li><cite>finagle-core</cite>: Introduce ewma load metric</li>
<li><cite>finagle-core</cite>: Log state for ewma load metric</li>
<li><cite>finagle-core</cite>: Redesign of twitter-server admin page</li>
<li><cite>finagle-core</cite>: Register StackClient with Path dest in ClientRegistry as evaluated against Dtab.base Problem</li>
<li><cite>finagle-core</cite>: Rewrote ServiceLoader to avoid creating</li>
<li><cite>finagle-core</cite>: SingletonPool: a single-service pool with good semantics</li>
<li><cite>finagle-core</cite>: Zipkin tracing for name resolution</li>
<li><cite>finagle-core</cite>: fix synchronization in SummarizingStatsReceiver</li>
<li><cite>finagle-core</cite>: reusing pool: isAvailable === underlying.isAvailable</li>
<li><cite>finagle-docs</cite>: A better picture for filters. (Replaces hand-drawn monstrosity.)</li>
<li><cite>finagle-docs</cite>: Add Scaladocs for all public exception classes in Finagle.</li>
<li><cite>finagle-docs</cite>: Add a section to the FAQ regarding FailedFastExceptions</li>
<li><cite>finagle-exp</cite>: Generify the DarkTrafficFilter problem</li>
<li><cite>finagle-guide</cite>: Document stabilizing serverset metrics.</li>
<li><cite>finagle-http</cite>: Add support for a Dtab-Local header</li>
<li><cite>finagle-http</cite>: Fail requests with invalid X-Dtab headers</li>
<li><cite>finagle-http</cite>: Fail requests with invalid X-Dtab headers</li>
<li><cite>finagle-http</cite>: TextualContentCompressor should compress textual Content-Type&#8217;s even when containing a charset</li>
<li><cite>finagle-mux</cite>,thriftmux: explain why the files are named Netty3</li>
<li><cite>finagle-mux</cite>: Better gc avoidance flags for experimentation</li>
<li><cite>finagle-mux</cite>: Enable gc avoidance for parallel gc</li>
<li><cite>finagle-mux</cite>: Improve mux&#8217;s handling of client disconnects</li>
<li><cite>finagle-mux</cite>: Improved Garbage Collection Avoidance Docs</li>
<li><cite>finagle-mux</cite>: docs and minor cleansing in Message subclasses</li>
<li><cite>finagle-mysql</cite>: Switches PreparedCache over to util-cache FutureCache</li>
<li><cite>finagle-serversets</cite>: Add support for getEphemerals ZooKeeper call</li>
<li><cite>finagle-serversets</cite>: Memoize getChildrenWatchOp instead of globPrefixWatchOp</li>
<li><cite>finagle-serversets</cite>: Reuse ObjectMapper in JSON parser.</li>
<li><cite>finagle-serversets</cite>: add latency metrics for ServerSet2.</li>
<li><cite>finagle-zipkin</cite>: Reduce allocations when tracing</li>
</ul>
</div>
<div class="section" id="id63">
<h2>6.20.0<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: Smattering of minor cleanups in util and finagle</li>
<li><cite>finagle</cite>: Upgrade sbt to 0.13</li>
<li><cite>finagle</cite>: Upgrade to Netty 3.9.1.1.Final</li>
<li><cite>finagle-core</cite>: Add NameTree.Fail to permit failing a name without fallback</li>
<li><cite>finagle-core</cite>: Add a generic DtabStatsFilter</li>
<li><cite>finagle-core</cite>: Add a singleton exception and a counter in WatermarkPool</li>
<li><cite>finagle-core</cite>: DefaultClient in terms of StackClient</li>
<li><cite>finagle-core</cite>: Disable Netty&#8217;s thread renaming</li>
<li><cite>finagle-core</cite>: Fix CumulativeGauge memory leak</li>
<li><cite>finagle-core</cite>: Fix negative resolution in Namer.global</li>
<li><cite>finagle-core</cite>: Fixed ChannelStatsHandler to properly filter exceptions</li>
<li><cite>finagle-core</cite>: Forces finagle-core to use ipv4 network stack</li>
<li><cite>finagle-core</cite>: Improve <cite>Failure.toString</cite></li>
<li><cite>finagle-core</cite>: Include path and Dtab.local in NoBrokersAvailableException</li>
<li><cite>finagle-core</cite>: Log exceptions caught by ChannelStatsHandler</li>
<li><cite>finagle-core</cite>: Make timer-based DNS resolution as default of InetResolver</li>
<li><cite>finagle-core</cite>: Reader and getContent symmetry</li>
<li><cite>finagle-core</cite>: Reduces log level for common exceptions</li>
<li><cite>finagle-core</cite>: Register clients centrally</li>
<li><cite>finagle-doc</cite>: Add fintop to companion projects list on Finagle website</li>
<li><cite>finagle-http</cite>: Don&#8217;t emit (illegal) newlines in lengthy dtab header values</li>
<li><cite>finagle-http</cite>: Fix code style from an open-source contribution</li>
<li><cite>finagle-http</cite>: Migrate from specs to scalatest</li>
<li><cite>finagle-kestrel</cite>: Make transaction abort timeout configurable in MultiReader</li>
<li><cite>finagle-mux</cite>: Added extra client logging</li>
<li><cite>finagle-mux</cite>: Fix broken draining behavior</li>
<li><cite>finagle-mux</cite>: Improve granularity of rate to bytes/millisecond</li>
<li><cite>finagle-serversets</cite>: Handle errors that occur when fetching endpoints</li>
<li><cite>finagle-serversets</cite>: Increase ZK session timeout to 10 seconds</li>
<li><cite>finagle-serversets</cite>: Merge WeightedSocketAddresses with same host:port but different weight in Stabilizer</li>
<li><cite>finagle-serversets</cite>: Synchronize bug fixes &amp; test coverage across ZK facades</li>
<li><cite>finagle-swift</cite>: Fixes pants build warning</li>
<li><cite>finagle-thrift</cite>: Add explicit dependency on libthrift</li>
<li><cite>finagle-thrift</cite>: Remove usage of java_sources, should be able to depend on it normally</li>
</ul>
</div>
<div class="section" id="id64">
<h2>6.19.0<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Allow trailing semicolons in dtabs</li>
<li><cite>finagle-core</cite>: Rescue exceptions thrown by filter in <cite>Filter.andthen(Filter)</cite></li>
<li><cite>finagle-core</cite>: StackClient, StackClientLike don&#8217;t leak underlying In, Out types</li>
<li><cite>finagle-doc</cite>: Clarify cancellation</li>
<li><cite>finagle-doc</cite>: Fix broken link in document</li>
<li><cite>finagle-doc</cite>: Fix name footnote in finagle Names docs</li>
<li><cite>finagle-http</cite>: Buf, Reader remove Buf.Eof; end-of-stream is None</li>
<li><cite>finagle-http</cite>: Prepend comment to JSONP callbacks</li>
<li><cite>finagle-http</cite>: Removing specs from the CookieMapSpec test.</li>
<li><cite>finagle-kestrel</cite>: Make failFast configurable in Kestrel codec</li>
<li><cite>finagle-mysql</cite>: Ensure mysql specific tracing is composed.</li>
<li><cite>finagle-mysql</cite>: Finagle MySQL PreparedStatement accepts Value types as params.</li>
<li><cite>finagle-serversets</cite>: Identity Providers for Serverset2</li>
<li><cite>finagle-thriftmux</cite>: Add withProtocolFactory API endpoint</li>
<li><cite>finagle-thriftmux</cite>: Don&#8217;t reuse InMemoryStatsReceiver in the same test</li>
</ul>
</div>
<div class="section" id="id65">
<h2>6.18.0<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-*</cite>: release scrooge v3.16.0</li>
<li><cite>finagle-*</cite>: release util v6.18.0</li>
<li><cite>finagle-core</cite>: Add <cite>description</cite> field to com.twitter.finagle.Stackable trait</li>
<li><cite>finagle-core</cite>: Add a Flag to turn on per-host stats</li>
<li><cite>finagle-core</cite>: Add a service acquisition latency stat to StatsFactoryWrapper</li>
<li><cite>finagle-core</cite>: Don&#8217;t support empty path elements in com.twitter.finagle.Path</li>
<li><cite>finagle-core</cite>: Improves FailFastFactory documentation</li>
<li><cite>finagle-core</cite>: Make c.t.f.Failure a direct subclass of Exception</li>
<li><cite>finagle-core</cite>: Skip SOCKS proxy when connecting to loopback address</li>
<li><cite>finagle-core</cite>: Use Monitor from caller&#8217;s context in DefaultTimer</li>
<li><cite>finagle-http</cite>: Add &#8220;Enhance Your Calm&#8221; and &#8220;Too Many Requests&#8221; HTTP status codes</li>
<li><cite>finagle-http</cite>: Add exp.HttpServer, which allows request limits to be configured</li>
<li><cite>finagle-http</cite>: Change Request#params to a memoized def</li>
<li><cite>finagle-http</cite>: Stream request body</li>
<li><cite>finagle-kestrel</cite>: Add Name-based methods for MultiReader construction</li>
<li><cite>finagle-memcached</cite>: Expose the client type <cite>KetamaClient</cite> in the <cite>build()</cite> API</li>
<li><cite>finagle-mux</cite>: GC Avoidance Algorithm</li>
<li><cite>finagle-mux</cite>: Hook up GC avoidance to servers</li>
<li><cite>finagle-mux</cite>: Move UseMux.java to the correct directory</li>
<li><cite>finagle-serversets</cite>: Randomizes backoff interval in ZK2</li>
<li><cite>finagle-serversets</cite>: Start resolution eagerly in ZK2</li>
<li><cite>finagle-stats</cite>: Add a stat-filtration GlobalFlag</li>
<li><cite>ostrich</cite>: release ostrich v9.5.2</li>
<li><cite>user guide</cite>: Add Google Analytics tracking code</li>
<li><cite>user guide</cite>: Add sections about review process and starter issues</li>
<li><cite>user guide</cite>: Update Finagle adopter list on user guide website</li>
<li><cite>wily</cite>: Add Dtab expansion</li>
</ul>
</div>
<div class="section" id="id66">
<h2>6.17.0<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: Add list of Finagle adopters</li>
<li><cite>finagle</cite>: Upgrade third-party dependencies</li>
<li><cite>finagle-core</cite>: Add <cite>Addr.Neg</cite> to the user guide&#8217;s list of Addr types</li>
<li><cite>finagle-core</cite>: Added Failure support for sourcing to finagle</li>
<li><cite>finagle-core</cite>: ClientBuilder should turn per-host stats off by default (matching new Client building API).</li>
<li><cite>finagle-core</cite>: Implement DefaultServer in terms of StackServer</li>
<li><cite>finagle-core</cite>: Improve the Dtab API</li>
<li><cite>finagle-core</cite>: Prevent scoping stats with the empty-string</li>
<li><cite>finagle-core</cite>: Rolls up the /tries scope properly</li>
<li><cite>finagle-core</cite>: ServerStatsReceiver and ClientStatsReceiver can now update their root scope</li>
<li><cite>finagle-core</cite>: fix race case in DelayedFactory</li>
<li><cite>finagle-core</cite>: introduce AbstractResolver</li>
<li><cite>finagle-core</cite>: remove need for hostConnectionLimit when using ClientBuilder#stack</li>
<li><cite>finagle-core</cite>: widen to type for ServerBuilder#stack</li>
<li><cite>finagle-core</cite>: widen type of ClientBuilder#stack</li>
<li><cite>finagle-doc</cite>: Removed a line from conf.py</li>
<li><cite>finagle-http</cite>: DtabFilter should always clear dtab headers</li>
<li><cite>finagle-http</cite>: add HOST header for CONNECT method</li>
<li><cite>finagle-http</cite>: scala 2.10 compatible tests</li>
<li><cite>finagle-memcached</cite>: filter out one more cancelling request exception in failure accrual</li>
<li><cite>finagle-memcached</cite>: remove empty test</li>
<li><cite>finagle-mux</cite>: Improve Mux server close behavior, control messages to non-Mux clients</li>
<li><cite>finagle-mux</cite>: Marked a gc test as flaky</li>
<li><cite>finagle-mux</cite>: Modifies MuxService to essentially be a Service[Spool[Buf], Spool[Buf]] Problem</li>
<li><cite>finagle-mux</cite>: Rm ClientHangupException in favor of CancelledRequestException</li>
<li><cite>finagle-mysql</cite>: Retrieving a timestamp from the DB nw creates a timestamp in UTC</li>
<li><cite>finagle-mysql</cite>: fix for issue where time was not being returned in UTC for binary protocol</li>
<li><cite>finagle-serversets</cite>: Prevent gauges from being garbage collected</li>
<li><cite>finagle-thrift</cite>: Blackhole control messages sent to non-mux Thrift clients</li>
<li><cite>finagle-thriftmux</cite>: Add per-connection protocol-usage stats</li>
<li><cite>finagle-thriftmux</cite>: Add stats to identify ThriftMux clients and servers</li>
<li><cite>finagle-thriftmux</cite>: Propagate Contexts from non-ThriftMux clients</li>
<li><cite>finagle-thriftmux</cite>: add ClientBuilder#stack compatibility and make APIs symmetric</li>
<li><cite>finagle-thriftmux</cite>: pass along ClientId with ClientBuilder API</li>
</ul>
</div>
<div class="section" id="id67">
<h2>6.16.0<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add Stack#remove</li>
<li><cite>finagle-core</cite>: Add a copy constructor to Stack{Client, Server}</li>
<li><cite>finagle-core</cite>: Fixed a typo in scaladoc <a class="reference external" href="https://github.com/twitter/finagle/pull/264">https://github.com/twitter/finagle/pull/264</a></li>
<li><cite>finagle-core</cite>: Implement ClientBuilder in terms of StackClient</li>
<li><cite>finagle-core</cite>: Invert the <cite>cancelOnHangup</cite> value passed to MaskCancelFilter.Param</li>
<li><cite>finagle-core</cite>: Liberate Failure</li>
<li><cite>finagle-core</cite>: Log all services loaded by c.t.finagle.util.LoadService</li>
<li><cite>finagle-core</cite>: Minor c.t.app.ClassPath/c.t.f.util.LoadService cleanup</li>
<li><cite>finagle-core</cite>: Properly close sockets on shutdown</li>
<li><cite>finagle-core</cite>: Properly scope stats by label in Stack{Client,Server}</li>
<li><cite>finagle-core</cite>: Remove <cite>Stack{Server,Client}.transformed</cite></li>
<li><cite>finagle-core</cite>: Scoped the RollupStatsReceiver carefully</li>
<li><cite>finagle-core</cite>: Thread through Codec#newClientTransport in ClientBuilder</li>
<li><cite>finagle-core</cite>: Update to netty-3.9.1.Final</li>
<li><cite>finagle-example</cite>: Add Java Thrift client and server</li>
<li><cite>finagle-http</cite>: Add Csv,Xls,Zip to finagle MediaType</li>
<li><cite>finagle-http</cite>: Adds tls support to finagle 6 apis</li>
<li><cite>finagle-http</cite>: Set the response content-length header to 0 in ExceptionFilter.</li>
<li><cite>finagle-kestrel</cite>: Add Thrift support to Kestrel MultiReader in Finagle-Kestrel</li>
<li><cite>finagle-mux</cite>: Cleaned up build information</li>
<li><cite>finagle-mux</cite>: GC Avoidance primitives</li>
<li><cite>finagle-mux</cite>: Move exp.MuxClient and exp.MuxServer</li>
<li><cite>finagle-mux</cite>: Record tracing info when Mux is enabled</li>
<li><cite>finagle-mux</cite>: Refactor Session to make closing a Session uniform</li>
<li><cite>finagle-mux</cite>: Render mux clients leasable</li>
<li><cite>finagle-redis</cite>: Added support for redis MOVE command.</li>
<li><cite>finagle-serversets</cite>: Reduce the number of intermediate datastructures</li>
<li><cite>finagle-thriftmux</cite>: Add ThriftMux.withClientId</li>
<li><cite>finagle-thriftmux</cite>: Maintain legacy client and server names</li>
<li><cite>finagle-{core,thrift,mux}</cite>: Clean up contexts, delimit Locals</li>
</ul>
</div>
<div class="section" id="id68">
<h2>6.15.0<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Fixed DefaultClient to use the base close method</li>
<li><cite>finagle-core</cite>: Fix a race condition when closing in DefaultServer</li>
<li><cite>finagle-serversets</cite>: memoize path parses in ServerSet2</li>
<li><cite>finagle-mux</cite>: remove references to org.jboss.netty.util.CharsetUtil</li>
<li><cite>finagle-http</cite>: create HttpTransport in codec</li>
<li><cite>finagle-http</cite>: fix basic authentication with special characters</li>
<li><cite>finagle-http</cite>: temporary fix for prematurely expiring streaming responses</li>
<li><cite>finagle-core</cite>: don&#8217;t discard outstanding readq elements in ChannelTransport</li>
<li><cite>finagle-core</cite>: Add Socks Proxy Authentication support</li>
<li><cite>finagle-doc</cite>: fix image size in client stack figure.</li>
<li><cite>finagle-stats</cite>: unregister cumulative gauges when all references have been collected</li>
<li><cite>finagle-core</cite>: fix truncation in ChannelBufferBuf#slice()</li>
<li><cite>finagle-stats</cite>: upgrade to the latest version of metrics</li>
<li><cite>finagle-stats</cite>: Enable cumulative gauges in MetricsStatsReceiver</li>
<li><cite>finagle-mysql</cite>: Move mysql testing out of finagle-mysql</li>
<li><cite>finagle-serversets</cite>: serverset namer - synthesize nodes for each endpoint</li>
<li><cite>finagle-http</cite>: fix HttpClientDispatcher</li>
<li><cite>finagle-core</cite>: transport should be considered closed if it is failed</li>
<li><cite>finagle-core</cite>: Improve the failure for cancelled requests in the ClientDispatcher</li>
<li><cite>finagle-core</cite>: LocalScheduler - add LIFO option</li>
<li><cite>finagle-core</cite>: don&#8217;t join after interrupt in Exitguard.Unguard()</li>
<li><cite>finagle-serversets</cite>: Replaces Op with Activity Problem</li>
<li><cite>finagle-mysql</cite>: implement builder using StackClient.</li>
<li><cite>finagle-core</cite>: Make LoadService not fail if a sub-dir is not readable</li>
<li><cite>finagle-core</cite>: Make com.twitter.finagle.Name an ADT</li>
<li><cite>finagle-core</cite>: curry <cite>newDispatcher</cite> in Stack{Client, Server}</li>
<li><cite>finagle-thriftmux</cite>: Add a flag for enabling ThriftMux</li>
<li><cite>finagle-doc</cite>: improved rastering of logos</li>
<li><cite>finagle-core</cite>: Retry on com.twitter.util.TimeoutException</li>
<li><cite>finagle-core</cite>: introduce ForkJoinScheduler</li>
<li><cite>finagle-serversets</cite>: facade for ZooKeeper libraries</li>
</ul>
</div>
<div class="section" id="id69">
<h2>6.14.0<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-*</cite>: Add com.twitter.io.Charsets and replace the use of org.jboss.netty.util.CharsetUtil</li>
<li><cite>finagle-benchmark</cite>: Fix caliper failures due to new guava</li>
<li><cite>finagle-core</cite>: Disable Monitor usage of in Netty3Listener</li>
<li><cite>finagle-core</cite>: Enforce usage of c.t.finagle.util.DefaultLogger</li>
<li><cite>finagle-core</cite>: Fix a Netty3Timer capitalization bug</li>
<li><cite>finagle-core</cite>: Fixed unresolved promises in client dispatcher</li>
<li><cite>finagle-core</cite>: Implement ServerBuilder in terms of StackServer.</li>
<li><cite>finagle-core</cite>: Introduce 2-level caching in the name interpreter</li>
<li><cite>finagle-core</cite>: Introduce Failure interface (internally)</li>
<li><cite>finagle-core</cite>: Introduce StackServer</li>
<li><cite>finagle-core</cite>: Introduce a flag for debug tracing</li>
<li><cite>finagle-core</cite>: Make StackClient symmetric to StackServer</li>
<li><cite>finagle-core</cite>: Parse names into trees; introduce separate evaluation.</li>
<li><cite>finagle-core</cite>: Remove redundant Netty3Timer param def</li>
<li><cite>finagle-core</cite>: Resolver.resolve throws IllegalArgumentException on logical name</li>
<li><cite>finagle-core</cite>: RetryPolicy filter, limit, combine</li>
<li><cite>finagle-core</cite>: Thread through NullReporterFactory in ServerBuilder.</li>
<li><cite>finagle-core</cite>: Use DefaultLoadBalancerFactory</li>
<li><cite>finagle-core</cite>: Use JDK6-friendly RuntimeException constructor in Failure</li>
<li><cite>finagle-doc</cite>: README refresh</li>
<li><cite>finagle-doc</cite>: Refresh client stack docs</li>
<li><cite>finagle-memcached</cite>: Ketama memcache: accept weighted addresses</li>
<li><cite>finagle-mux</cite>: Add server-side Stack wiring for Mux and ThriftMux</li>
<li><cite>finagle-mysql</cite>: Proper prepared statement support.</li>
<li><cite>finagle-serversets</cite>: Add Read-Only ZK support to zk2 Resolver</li>
<li><cite>finagle-serversets</cite>: Zk2: deliver events serially in their own thread</li>
<li><cite>finagle-thrift</cite>: workaround libthrift TBinaryProtocol.writeBinary bug</li>
<li><cite>finagle-zipkin</cite>: Include service name in all traces</li>
</ul>
</div>
<div class="section" id="id70">
<h2>6.13.1<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Case insensitive Dtab headers in HTTP codec</li>
<li><cite>finagle-core</cite>: Introduce Stack.Params#contains</li>
<li><cite>finagle-docs</cite>: address small style nits</li>
<li><cite>finagle-http</cite>: support reading params in content body for HTTP methods other than POST and PUT</li>
<li><cite>finagle-memcached</cite>: add ketamaclient initial readiness before the first request</li>
<li><cite>finagle-serversets</cite>: Disable retry behavior but turn exception into negative resolution.</li>
<li><cite>finagle-serversets</cite>: Stabilizer: don&#8217;t consider Pending update successful</li>
<li><cite>finagle-stats</cite>: use java.lang.Double in addGauge()</li>
<li><cite>finagle</cite>: Add <cite>cause</cite> Throwables for all ConnectionFailedExceptions</li>
<li><cite>finagle</cite>: Fix Travis-CI integration.</li>
<li><cite>finagle</cite>: Swap Stack.Node and Stack.Leaf args in toString formatting</li>
<li><cite>finagle</cite>: Update 3rdparty library versions</li>
<li><cite>finagle</cite>: Upgrade birdcage to guava 16</li>
<li><cite>finagle</cite>: upgrade ostrich to 9.4.2</li>
<li><cite>finagle</cite>: upgrade util to 6.13.2</li>
</ul>
</div>
<div class="section" id="id71">
<h2>6.13.0<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: ForkJoin scheduler: first draft</li>
<li><cite>finagle-doc</cite>: Update URL to Finagle blog post. Motivation: Outdated URL</li>
<li><cite>finagle-http</cite>: compress text-like content-types by default</li>
<li><cite>finagle-memcached</cite>: Mark test &#8220;not migrating yet&#8221; as flaky</li>
<li><cite>finagle-mux</cite>: don&#8217;t delegate empty dtabs</li>
<li><cite>finagle-mysql</cite>: Better failure handling for the dispatcher</li>
<li><cite>finagle-ostrich4</cite>: Make OstrichExporter compatible with Ostrich CommandHandler.</li>
<li><cite>finagle-redis</cite>: Add SINTER command to redis client</li>
<li><cite>finagle-redis</cite>: Allow an empty string as a hash field value</li>
<li><cite>finagle-redis</cite>: Fixed the empty string issue of MBULK_REPLY</li>
<li><cite>finagle-serverset</cite>: ServerSets2: reset value on SyncConnected</li>
<li><cite>finagle-stats</cite>: Upgrade metrics dependency to the latest version.</li>
<li><cite>finagle-thrift</cite>: Do not rely on ThreadLocal&#8217;d ClientIds in TTwitterFilter</li>
<li><cite>finagle-thrift[mux]</cite>: Reintroduce ClientIdContext by default</li>
<li><cite>finagle-zipkin</cite>: TraceId invariance</li>
<li><cite>finagle/S2</cite>: introduce address stabilization, stats</li>
<li><cite>finagle</cite>: Add Mux and ThriftMux Clients based on com.twitter.finagle.Stack</li>
<li><cite>finagle</cite>: fix dependency problem with multiple version of serversets</li>
<li><cite>finagle</cite>: Fix the sbt doc generation (and tests)</li>
<li><cite>finagle</cite>: upgrade Netty to 3.8.1</li>
<li><cite>finagle</cite>: upgrade ostrich to version 9.4.0</li>
<li><cite>finagle</cite>: upgrade util to version 6.13.0</li>
</ul>
</div>
<div class="section" id="id72">
<h2>6.12.2<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: release scrooge version 3.12.3</li>
<li><cite>finagle-exception</cite>: Drop scrooge in favor of pre-generated Thrift Java source code.</li>
<li><cite>finagle-zipkin</cite>: Drop scrooge in favor of pre-generated Thrift Java source code.</li>
</ul>
</div>
<div class="section" id="id73">
<h2>6.12.1<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: release ostrich version 9.3.1</li>
<li><cite>finagle</cite>: release util version 6.12.1</li>
<li><cite>finagle</cite>: Upgrade everyone to the new c.t.common.server-set</li>
</ul>
</div>
<div class="section" id="id74">
<h2>6.12.0<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add a <cite>ServerBuilder.safeBuild(ServiceFactory)</cite> method for Java compatibility</li>
<li><cite>finagle-core</cite>: Add basic Scaladocs for all Filters and Services</li>
<li><cite>finagle-core</cite>: close Name Var observation on service close</li>
<li><cite>finagle-core</cite>: com.twitter.finagle.Stack: initial version</li>
<li><cite>finagle-core</cite>: Fix race condition in server dispatcher draining state machine</li>
<li><cite>finagle-core</cite>: low hanging fruit</li>
<li><cite>finagle-core</cite>: Make <cite>Resolver.evalLabeled</cite> private[finagle]</li>
<li><cite>finagle-core</cite>: Option to enable thread pool scheduler in finagle&#8221;</li>
<li><cite>finagle-core</cite>: Record Finagle version in tracing information</li>
<li><cite>finagle-core</cite>: Remove a long-forgotten java file</li>
<li><cite>finagle-core</cite>: Separate stats scopes for service-creation and request failure</li>
<li><cite>finagle-core</cite>: TimeoutFactorySpec =&gt; TimeoutFactoryTest</li>
<li><cite>finagle-core</cite>: Users don&#8217;t get NPE on directories without permissions</li>
<li><cite>finagle-core</cite>: Weights, weighted load balancer, memoization</li>
<li><cite>finagle-core</cite>: Write <cite>Throwables.mkString</cite> in terms of ArrayBuffer instead of Seq</li>
<li><cite>finagle-doc</cite>: How do I change my timeouts in the Finagle 6 APIs?</li>
<li><cite>finagle-example</cite>: Port finagle-example thrift to new style APIs</li>
<li><cite>finagle-http</cite>: Add Dtab filter in RichHttp</li>
<li><cite>finagle-http</cite>: enable tracing on finagle 6 http api</li>
<li><cite>finagle-kestrel</cite>: Fix match-exhaustiveness issue in <cite>DecodingToResponse.parseResponse</cite></li>
<li><cite>finagle-kestrel</cite>: Use Var[Addr] as underlying cluster representation</li>
<li><cite>finagle-memcache</cite>: Add a parameter to disable host ejection from KetamaFailureAccrualFilter</li>
<li><cite>finagle-memcached</cite>: include response type for IllegalStateException</li>
<li><cite>finagle-mux</cite>: Adds lease support to mux clients</li>
<li><cite>finagle-mysql</cite>: Embeddable MySql support for Unit/Integration Testing in Finagle-MySql</li>
<li><cite>finagle-serversets</cite>: prevent MatchError when resolving zk path + endpoint</li>
<li><cite>finagle-serversets</cite>: Use ephemeral ports and <cite>Var.sample</cite> in tests</li>
<li><cite>finagle-serversets</cite>: Use the watch method instead of the now deprecated monitor method</li>
<li><cite>finagle-tracing</cite> /zipkin: remove some allocations</li>
<li><cite>finagle</cite>: update dependencies com.twitter.common*</li>
<li><cite>finagle</cite>: update ostrich to 9.3.0</li>
<li><cite>finagle</cite>: update util to 6.12.0</li>
<li><cite>finagle</cite>: Use a more descriptive message for when client name resolution is negative</li>
</ul>
</div>
<div class="section" id="id75">
<h2>6.11.1<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Masks cancellation on PipeliningDispatcher</li>
<li><cite>finagle-doc</cite>: Fix finagle-websocket link on Finagle docs website.</li>
<li><cite>finagle-http</cite>: Http client dispatcher</li>
<li><cite>finagle-kestrel</cite>: Add abort command to kestrel client</li>
</ul>
</div>
<div class="section" id="id76">
<h2>6.11.0<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add a &#8220;tries&#8221; scoped StatsFilter to ClientBuilder.</li>
<li><cite>finagle-core</cite>: Allow clean shutdown for insoluble address in DelayedFactory.</li>
<li><cite>finagle-core</cite>: Better exception message for resolver not found issue.</li>
<li><cite>finagle-core</cite>: Introduce P2CLB: O(1), fair-weighted, concurrent load balancer</li>
<li><cite>finagle-core</cite>: Refactor dispatchers.</li>
<li><cite>finagle-core</cite>: Set interest ops when reading in ChannelTransport.</li>
<li><cite>finagle-core</cite>: Skip hostStatsReceiver rollup if it&#8217;s null in DefaultClient.</li>
<li><cite>finagle-core</cite>: Untyped ChannelTransports.</li>
<li><cite>finagle-example</cite>: Use new <cite>request.headers()</cite> Netty API.</li>
<li><cite>finagle-http</cite>: Proper streaming dispatch.</li>
<li><cite>finagle-kestrel</cite>: Make ReadHandle an abstract class for better Java compatibility.</li>
<li><cite>finagle-serversets</cite>: Fix com.twitter.common.zookeeper.server-set dependency discrepancy.</li>
<li><cite>finagle-serversets</cite>: Introduce ServerSet2.</li>
<li><cite>finagle-serversets</cite>: Weight/priority vectors in ServerSet2.</li>
<li><cite>finagle-stream</cite>: Use dispatch logic.</li>
<li><cite>finagle-stress</cite>: Use BridgedThreadPoolScheduler.</li>
<li><cite>finagle-thrift</cite>: Add TFinagleBinaryProtocol</li>
<li><cite>finagle-thriftmux</cite>: Drop dependency on finagle-ostrich4.</li>
<li><cite>finagle-thriftmux</cite>: Remove scrooge2 dependency.</li>
<li><cite>finagle</cite>: Use Future.before.</li>
<li><cite>finagle</cite>: adds a section to the FAQ explaining the com.twitter.common situation.</li>
<li><cite>finagle</cite>: s/setValue(())/setDone()/g</li>
</ul>
</div>
<div class="section" id="id77">
<h2>6.10.0<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Fix ServiceTimeoutException naming.</li>
<li><cite>finagle-core</cite>: Increase default tcpConnectTimeout to 350ms.</li>
<li><cite>finagle-core</cite>: Remove memory leak for never satisfied promises in DelayedFactory.</li>
<li><cite>finagle-memcached</cite>: Add ClientBuilder APIs that use Name instead of Group.</li>
<li><cite>finagle</cite>: Daemonize threads in ClientBuilders used in finagle.</li>
</ul>
</div>
<div class="section" id="id78">
<h2>6.9.0<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Avoid creating a new &#8216;NoStacktrace&#8217; array for each exception.</li>
<li><cite>finagle-core</cite>: Better support for negative Addr resolution in StabilizingAddr.</li>
<li><cite>finagle-core</cite>: Make Dtab.base changeable.</li>
<li><cite>finagle-core</cite>: Move mask cancel filter over to Future#mask.</li>
<li><cite>finagle-exp</cite>: New warmup filter.</li>
<li><cite>finagle-ostrich4</cite>: Deprecate Netty methods.</li>
<li><cite>finagle-serversets</cite>: Better handling of permission exceptions in ZkResolver.</li>
<li><cite>finagle-testers</cite>: Small latency evaluation framework.</li>
<li><cite>finagle</cite>: Adhere to scala 2.10 pattern matching strictness.</li>
</ul>
</div>
<div class="section" id="id79">
<h2>6.8.1<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: Upgrade ostrich to 9.2.1</li>
<li><cite>finagle</cite>: Upgarde util to 6.8.1</li>
<li><cite>finagle</cite>: Upgarde scrooge to 3.11.1</li>
</ul>
</div>
<div class="section" id="id80">
<h2>6.8.0<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-serversets</cite>: Higher fidelity addrs from ZK We do the best we can with the current server set implementation.</li>
<li><cite>finagle-mysql</cite>: better type support</li>
<li><cite>finagle-http</cite>: Allow Integer to extract negative number</li>
<li><cite>finagle-redis</cite>: Decode nested multi-bulk replies</li>
<li><cite>finagle-redis</cite>: Allow expirations in the past</li>
<li><cite>finagle-core</cite>: bump Netty to 3.8.0.Final</li>
<li><cite>finagle</cite>: Return empty string when resolving an unlabeled address</li>
<li><cite>finagle</cite>: Don&#8217;t re-scope StatsReceivers per request failure</li>
<li><cite>finagle-thrift</cite>: Unconditionally set TraceId and ClientId on servers</li>
<li><cite>finagle-core</cite>: Take -com.twitter.server.serversetZkHosts flag (for tunnelling)</li>
<li><cite>finagle-native</cite>: tomcat-native-1.1.27</li>
<li><cite>finagle-mysql</cite>: fix readLengthCodedBinary to read longs</li>
<li><cite>finagle-testers</cite>: library for integration testing of finagle services</li>
<li><cite>finagle</cite>: scaladoc warning cleanup</li>
<li><cite>finagle-doc</cite>: documented all of the stats in finagle-core</li>
<li><cite>finagle-serversets</cite>: bump server-set dependency to 1.0.56</li>
<li><cite>finagle-stats</cite>: adds a cautious registration to HttpMuxer / adds a default metrics endpoint to twitter-server</li>
<li><cite>finagle-core</cite>: verifies that statsfilter has the correct behavior</li>
<li><cite>finagle-serversets</cite>: Add support for parsing a !shardId on the end of a serverset address</li>
<li><cite>finagle-http</cite>: Use Reader for streaming</li>
<li><cite>finagle-core</cite>: no longer makes an anonymous exception in DefaultClient</li>
<li><cite>finagle-core</cite>: Using system class loader does not work when run inside sbt</li>
<li><cite>finagle-core</cite>: add pool_num_waited counter to WatermarkPool</li>
<li><cite>finagle-core</cite>: Protocol support for Wily: HTTP, thrift, mux (&amp; thus thriftmux).</li>
<li><cite>finagle-core</cite>: respect standard socksProxyHost / socksProxyPort properties in ClientBuilder and Netty3Transporter default args</li>
<li><cite>finagle-core</cite>: buffers requests until Var[Addr] is in a ready state</li>
<li><cite>finagle-core</cite>: Add putLong and getLong functions to util.ByteArrays</li>
<li><cite>finagle-core</cite>: don&#8217;t blow up if we don&#8217;t have a resolvable host name</li>
<li><cite>finagle-core</cite>: rm allocation in RichChannelFuture.apply&#8217;s operationComplete</li>
<li><cite>finagle-core</cite>: remove Var.apply; introduce Var.sample</li>
<li><cite>finagle-thriftmux</cite>: Support ClientIds at the protocol level</li>
<li><cite>finagle-kestrel</cite>: memory allocation improvements</li>
<li><cite>finagle-http</cite>: allow PUT requests to use RequestParamMap.postParams</li>
<li><cite>finagle-memcached</cite>: more performance and less allocations in Decoder</li>
</ul>
</div>
<div class="section" id="id81">
<h2>6.7.4<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Fail ChannelTransport read queue before closing the connection</li>
<li><cite>finagle-mux</cite>: Add session for mux message passing and bidirectional RPC</li>
<li><cite>finagle-zipkin</cite>: Depend on scrooge-core instead of scrooge-runtime</li>
</ul>
</div>
<div class="section" id="id82">
<h2>6.7.2<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: LoadService: skip empty lines</li>
<li><cite>finagle-core</cite>: Improve GC profile of Var and Group</li>
<li><cite>finagle-core</cite>: added a simple defaultpool test to show how it works + more docs</li>
<li><cite>finagle-core</cite>: removes commented out casting filter</li>
<li><cite>finagle-mysql</cite>: move protocol into a dispatcher and port to new style apis.</li>
</ul>
</div>
<div class="section" id="id83">
<h2>6.7.1<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-*</cite>: Tagging various tests as flaky</li>
<li><cite>finagle-*</cite>: Fix and reenable some formerly-flaky tests Now that Time.withXXXX is threadsafe</li>
<li><cite>finagle-*</cite>: Move Var to util</li>
<li><cite>finagle-*</cite>: Provide generic request contexts</li>
<li><cite>finagle-*</cite>: Use scrooge3 and up-to-date scrooge-maven-plugin settings</li>
<li><cite>finagle-*</cite>: upgrade Netty to 3.7.0.Final</li>
<li><cite>finagle-core</cite>: Add UnwritableChannel stat to ChannelStatsHandler</li>
<li><cite>finagle-core</cite>: Add a test for Proc exception-swallowing</li>
<li><cite>finagle-core</cite>: Better interface for RetryPolicy</li>
<li><cite>finagle-core</cite>: Ensure FIFO ordering when delivering updates to StabilizingGroup</li>
<li><cite>finagle-core</cite>: Export a health stat in StabilizingGroup</li>
<li><cite>finagle-core</cite>: Fix a race condition in ListeningSever.announce and don&#8217;t announce 0.0.0.0</li>
<li><cite>finagle-core</cite>: Fix sourcing for SourcedExceptions</li>
<li><cite>finagle-core</cite>: Group: communicate via Var[Set[T]]</li>
<li><cite>finagle-core</cite>: Improve HeapBalancer req distribution when N=2</li>
<li><cite>finagle-core</cite>: Introduce staged names</li>
<li><cite>finagle-core</cite>: Let the number of cores be specified on the command line</li>
<li><cite>finagle-core</cite>: Make socket writable duration stats more useful</li>
<li><cite>finagle-core</cite>: Migrate RetryingFilter tests from specs to scalatest</li>
<li><cite>finagle-core</cite>: Move the connections gauge into ChannelStatsHandler for GC</li>
<li><cite>finagle-core</cite>: Reuse a single exception instance in ServerDispatcher</li>
<li><cite>finagle-core</cite>: Update com.twitter.finagle package documentation</li>
<li><cite>finagle-doc</cite>: Add Client/Server Anatomy to docs</li>
<li><cite>finagle-doc</cite>: Link to &#8220;Your Server as a Function&#8221;</li>
<li><cite>finagle-http</cite>: Proper CORS implementation on Finagle</li>
<li><cite>finagle-http</cite>: SPNEGO http auth (for Kerberos) with an example implementation for internal services</li>
<li><cite>finagle-memcached</cite>: Exclude CancelledRequestException and CancelledConectionException or cache client failure accrual</li>
<li><cite>finagle-memcached</cite>: Read key remapping config from ZooKeeper</li>
<li><cite>finagle-memcached</cite>: ZK based cache node group implementation</li>
<li><cite>finagle-redis</cite>: SRandMember, send command without count when None</li>
<li><cite>finagle-serversets</cite>: Mark ZookeeperServerSetCluster as deprecated</li>
<li><cite>finagle-thrift</cite>: Add a request context for ClientId</li>
<li><cite>finagle-thrift</cite>: Set the client id in thriftmux</li>
</ul>
</div>
<div class="section" id="id84">
<h2>6.7.0<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<p>Release process failed. Rolled forward to 6.7.1.</p>
</div>
<div class="section" id="id85">
<h2>6.6.2<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Configurable loadBalancer for ClientConfig</li>
<li><cite>finagle-core</cite>: Fix the memory leak due to the GlobalStatsReceiver</li>
<li><cite>finagle-core</cite>: Inet util, bind to all if no host is provided</li>
<li><cite>finagle-core</cite>: Make Future.never a val instead of a def</li>
<li><cite>finagle-memcached</cite>: Fix tracing ClientRecv timestamp</li>
<li><cite>finagle</cite>: New ostrich version</li>
</ul>
</div>
<div class="section" id="id86">
<h2>6.6.0<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add a RetryPolicy constant for retrying on ChannelClosedExceptions.</li>
<li><cite>finagle-core</cite>: ChannelSnooper: Print exceptions via Logger</li>
<li><cite>finagle-core</cite>: Finagle client/server APIs: s/target/addr/g</li>
<li><cite>finagle-core</cite>: Introduce swappable schedulers, ThreadPool scheduler.</li>
<li><cite>finagle-core</cite>: Replacing ostrich-specific Stats with StatsReceiver interface</li>
<li><cite>finagle-core</cite>: Tests for BroadcastStatsReceiver</li>
<li><cite>finagle-core</cite>: adding service name to a service exception</li>
<li><cite>finagle-core</cite>: fix file mispelling for StabilizingGroup.scala</li>
<li><cite>finagle-core</cite>: fix memory leak in Group#fromCluster</li>
<li><cite>finagle-core</cite>: refactor use of InetSocketAddress group and deprecate use of cluster in cache client</li>
<li><cite>finagle-http</cite>: Add Access-Control-Expose-Headers to Finagle CORSFilter</li>
<li><cite>finagle-http</cite>: Fix Path comments, improve sbt definition</li>
<li><cite>finagle-http</cite>: Http connection manager: close synchronously</li>
<li><cite>finagle-http</cite>: Make behavior of HttpMuxer match its javadoc</li>
<li><cite>finagle-http</cite>: Mix in Proxy with HttpMessageProxy</li>
<li><cite>finagle-http</cite>: bump request/response sizes to 5 megs</li>
<li><cite>finagle-memcached</cite>: Memcached Ketama Client Builder: Add group support that is compatible with oldlibmemcached , creates CacheNodes with ipAddress instead of hostname.</li>
<li><cite>finagle-memcached</cite>: Update jackson to 2.2.2</li>
<li><cite>finagle-memcached</cite>: allow custom key in ketama client</li>
<li><cite>finagle-memcached</cite>: better exception messages for invalid keys</li>
<li><cite>finagle-memcached</cite>: migration client</li>
<li><cite>finagle-ostrich4</cite>: improve perf of Counter and Stat</li>
<li><cite>finagle-swift</cite>: experimental swift-based thrift server and client An experimental annotation based proxy and dispatcher for thrift, using Facebook???s swift for serialization.</li>
<li><cite>finagle-thrift</cite>: breaking out finagle, higher-kinded-type interface</li>
<li><cite>finagle-thrift</cite>: fix finagle-thrift rich to work with scrooge 3.6.0</li>
<li><cite>finagle-thrift</cite>: move scrooge-runtime to scrooge</li>
<li><cite>finagle-thrift</cite>: remove use of deprecated generated ostrich ThriftServer</li>
<li><cite>finagle-zipkin</cite>: Add newlines to scribe message</li>
<li><cite>finagle-zipkin</cite>: Use better metric names for error stats</li>
<li><cite>finagle-zipkin</cite>: optimize scribe logging to not need slf4j</li>
</ul>
</div>
<div class="section" id="id87">
<h2>6.5.2<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>finagle-ostrich4: set stats export URI to stats.json</li>
<li>finagle-core: Introduce StabilizingGroup which cautiously removes items from a Group</li>
<li>finagle-core: Add group method to ClientBuilder</li>
<li>finagle-core: Add service/client name to ServiceTimeoutException</li>
<li>finagle-mux: Don&#8217;t allocate headers via direct buffers</li>
<li>finagle-http: Implement missing modifiers in Http case class</li>
<li>finagle-memcache: added support for twemcache commands</li>
</ul>
</div>
<div class="section" id="id88">
<h2>6.5.1<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-http</cite>: Move routing by path and method function to RoutingService</li>
<li><cite>finagle-redis</cite>: Switching from Strings to ChannelBuffers for Scored Zrange commands</li>
<li><cite>finagle-stats</cite>: Upgrade metrics to 0.0.9</li>
<li><cite>finagle-stream</cite>: Revert &#8220;Stream interface (i.e. chunked) for HTTP message bodies&#8221;</li>
<li><cite>finagle</cite>: Fix documentation about Java &amp; Future</li>
<li><cite>finagle</cite>: Refresh OWNERS/GROUPS in all subdirectories</li>
<li><cite>finagle</cite>: Upgrade Netty version to 3.6.6.Final</li>
<li><cite>finagle</cite>: Upgrade ostrich version to 9.1.2</li>
<li><cite>finagle</cite>: Upgrade util version to 6.3.7</li>
<li><cite>finagle-redis</cite>: Implement new SET syntax introduced in redis 2.6.12</li>
<li><cite>finagle-core</cite>: Open connection threshold et al</li>
</ul>
</div>
<div class="section" id="id89">
<h2>6.5.0<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: fix a bug in Trace.unwind in ruby</li>
<li><cite>finagle-core</cite>: speed up tracing when a trace is unsampled.</li>
<li><cite>finagle-redis</cite>: implement PEXPIRE/PEXPIREAT/PTTL</li>
<li><cite>finagle-redis</cite>: Make the multiple argument version of zAdd a separate method.</li>
<li><cite>finagle-serverset</cite>: create a ZkAnnouncer</li>
<li><cite>finagle-thriftmux</cite>: make thriftmux server back compatible with thrift framed codec</li>
<li><cite>finagle-zipkin</cite>: Performance improvement for finagle-zipkin</li>
<li><cite>finagle</cite>: Gizzard: Some followup deps alignment to fix deployment classpath issues</li>
<li><cite>finagle-memcached</cite>: KetamaClient based on finagle-6 API</li>
<li><cite>finagle-exception</cite>: unique namespace for scribe</li>
<li><cite>finagle-thrift</cite>: Add scrooge3 support</li>
<li><cite>finagle</cite>: bump sbt util/finagle version</li>
<li><cite>finagle</cite>: Updating owner list</li>
<li><cite>finagle</cite>: Upgrade util to 6.3.6 and scrooge-runtime to 3.1.2</li>
</ul>
</div>
<div class="section" id="id90">
<h2>6.4.1<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-http</cite>: CookieMap instead of CookieSet</li>
<li><cite>finagle-memcached</cite>: remove items stats test since twemcache does not carry those</li>
<li><cite>finagle-http</cite>: don&#8217;t choke on HEAD requests</li>
<li><cite>finagle-core</cite>: ReusingPool: fix race between setting Future.never and initiating connect</li>
<li><cite>finagle-thriftmux</cite>: also release services</li>
<li><cite>finagle-http</cite>: Use the correct dispatcher for RichHttp and new API</li>
<li><cite>finagle-exception</cite>: a loadable exception reporter</li>
<li><cite>finagle-core</cite>: make global flags consistently camelCase</li>
<li><cite>finagel-http</cite>: enable tracing by default for Http</li>
<li><cite>finagle-http</cite>: Call super method only if response is not chunked</li>
<li><cite>finagle-core</cite>: Tracing changes to annotate both client and server ip addresses</li>
<li><cite>finagle-http</cite>: Stream interface (i.e. chunked) for HTTP message bodies</li>
<li><cite>finagle-core</cite>: get a resolver instance contained in the main Resolver</li>
<li><cite>finagle-mux</cite>: fix TagMap.iterator</li>
<li><cite>finagle-mdns</cite>: Adding project to sbt</li>
<li><cite>inagle</cite>: Fix doc</li>
<li><cite>finagle-mysql</cite>: refactor endec into proper fsm</li>
<li><cite>finagle</cite>: Update sbt project for (util, ostrich, finagle)</li>
</ul>
</div>
<div class="section" id="id91">
<h2>6.4.0<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add unmanaged cache pool cluster</li>
<li><cite>finagle-core</cite>: Always enable TracingFilter even when no tracers are used.</li>
<li><cite>finagle-core</cite>: cache the cancelled connections in WatermarkPool instead of CachingPool</li>
<li><cite>finagle-core</cite>: Fix behavior of proxy forwarding in StatsReceiver</li>
<li><cite>finagle-core</cite>: Fix usage of RollupStatsReceiver in StatsFactoryWrapper.</li>
<li><cite>finagle-core</cite>: Generalize LoggingFilter</li>
<li><cite>finagle-core</cite>: HeapBalancer: fix handling of unavailable nodes</li>
<li><cite>finagle-core</cite>: Properly synchronize concurrent access to ProxyService state.</li>
<li><cite>finagle-core</cite>: Refactor Heapbalancer, remove usage of per host statsReceiver.</li>
<li><cite>finagle-core</cite>: share worker pools between server and client</li>
<li><cite>finagle-exception</cite>: Fix sourceHost supplied to chickadee exception reporter</li>
<li><cite>finagle-http</cite>: Add HttpConnectHandler and HttpClientCodec in the correct order when setting up an HTTP proxy client.</li>
<li><cite>finagle-http</cite>: add Response(status)</li>
<li><cite>finagle-http</cite>: EncodeBytes/decodeBytes for Request</li>
<li><cite>finagle-http</cite>: Refactor HeaderMap/ParamMap</li>
<li><cite>finagle-memcache</cite>: change to use consistent way to provide failure accrual params</li>
<li><cite>finagle-memcached</cite>: Propagating error message from server to client</li>
<li><cite>finagle-memcached</cite>: support for configuring numReps in KetamaClientBuilder</li>
<li><cite>finagle-mux</cite>: convert tests to use ScalaTest</li>
<li><cite>finagle-mysql</cite>: Ability to deal with non-ascii utf-8 characters</li>
<li><cite>finagle-mysql</cite>: Add ability to pass StatsReceiver to builder</li>
<li><cite>finagle-mysql</cite>: adds support for latin1_bin, paves the way for more charsets.</li>
<li><cite>finagle-mysql</cite>: Encode all the given the error information in the ServerError</li>
<li><cite>finagle-mysql</cite>: Fix improper use of ServiceFactory in Client</li>
<li><cite>finagle-redis</cite>: Fix byte encoding problem with Z(Rev)Rank</li>
<li><cite>finagle-redis</cite>: fixing Nil values in MBulkReplies</li>
<li><cite>Finagle-zipkin</cite>: decoupled sampling logic from ZipkinTracer to make a reusable SamplingTracer</li>
<li><cite>finagle-zipkin</cite>: Improve zipkin trace sampling</li>
<li><cite>finagle-zipkin</cite>: make ZipkinTracer loadable</li>
<li><cite>finagle</cite>: Document metrics</li>
<li><cite>finagle</cite>: Force service loader to return a concrete collection</li>
<li><cite>finagle</cite>: Refactor Future#get to Await.result</li>
<li><cite>finagle</cite>: Upgrade jackson to 1.9.11</li>
<li><cite>finagle</cite>: Upgrade ostrich to 9.1.1</li>
<li><cite>finagle</cite>: Upgrade util to 6.3.4</li>
</ul>
</div>
<div class="section" id="id92">
<h2>6.3.0<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle</cite>: Upgrade util to 6.3.0</li>
<li><cite>finagle-thrift</cite>: SocketAddress when serving an iface</li>
<li><cite>finagle-core</cite>: Specify DefaultTimer when creating a ChannelFactory</li>
<li><cite>finagle-core</cite>: DefaultClient/Server: Do not add TracingFilter if NullTracer is used</li>
</ul>
</div>
<div class="section" id="id93">
<h2>6.1.4<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-zipkin</cite>: tracing improvements</li>
<li><cite>finagle</cite>: Upgrade util to 6.2.5</li>
</ul>
</div>
<div class="section" id="id94">
<h2>6.1.3<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>finagle-core</cite>: Add BroadcastCounter and BroadcastStat, refactor Broadcast and Rollup Receiver.</li>
<li><cite>finagle</cite>: update sbt, add finagle-exp</li>
<li><cite>finagle-doc</cite>: Add a FAQ, add an entry about CancelledRequestExceptions</li>
<li><cite>finagle-core</cite>: Add client support for proxies that support HTTP CONNECT, such as squid.</li>
<li><cite>finagle-doc</cite>: A few wording fixes in Sphinx doc templates.</li>
<li><cite>finagle-core</cite>: StatsFilter: Check for WriteException-wrapped backup-request losers</li>
<li><cite>finagle-mysql</cite>: bug fixes</li>
<li><cite>finagle</cite>: Update sbt project definition</li>
<li><cite>finagle-core</cite>: Introduce DefaultTracer that load available Tracers via LoadService + Fix equality with NullStatsReceiver</li>
<li><cite>finagle-core</cite>: CachingPool: Do not schedule timer tasks if ttl is Duration.Top</li>
</ul>
</div>
<div class="section" id="id95">
<h2>6.1.2<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h2>
<p>Released 2013/03/21</p>
<ul class="simple">
<li><cite>finagle</cite>: Fix flakey tests</li>
<li><cite>finagle</cite>: fix sbt build</li>
<li><cite>finagle</cite>: Upgrade util to 6.2.4</li>
<li><cite>finagle-core</cite>: Fix reporting bug for pending reqs</li>
<li><cite>finagle-core</cite>: Move Disposable/Managed to util</li>
<li><cite>finagle-core</cite>: Use Future.Nil</li>
<li><cite>finagle-doc</cite>: Improve, add Matt Ho&#8217;s talk.</li>
<li><cite>finagle-exp</cite>: Add BackupRequestFilter, new backup request filter using response latency quantiles</li>
<li><cite>finagle-http</cite>: Avoid URISyntaxException</li>
<li><cite>finagle-memcached</cite>: Add Replication Cache Client</li>
<li><cite>finagle-mysql</cite>: Make prepareAndExecute and prepareAndSelect useful again.</li>
<li><cite>finagle-mysql</cite>: Make sure we are properly managing prepared statement</li>
<li><cite>finagle-mysql</cite>: Move interfaces outside of protocol package</li>
<li><cite>finagle-redis</cite>: Moved redis server classes from private to public</li>
<li><cite>finagle-thrift</cite>: fix 2.10 build</li>
</ul>
</div>
<div class="section" id="id96">
<h2>6.1.1<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h2>
<p>Released 2013/03/12</p>
<ul class="simple">
<li><cite>doc</cite>: Finagle user guide!</li>
<li><cite>finagle</cite>: Remove finagle&#8217;s dependence on jerkson.</li>
<li><cite>finagle</cite>: Upgrade Netty to 3.5.12</li>
<li><cite>finagle</cite>: Upgrade scrooge-runtime to 2.4.0</li>
<li><cite>finagle</cite>: Upgrade util to 6.2.2</li>
<li><cite>finagle-core</cite>: com.twitter.finagle.Group: introduce names, use them.</li>
<li><cite>finagle-core</cite>: deprivatize, document Client, Server.</li>
<li><cite>finagle-core</cite>: fix multiple stats bugs.</li>
<li><cite>finagle-core</cite>: Log Finagle&#8217;s version number on startup.</li>
<li><cite>finagle-core</cite>: RetryingFilter, don&#8217;t retry on CancelledRequestException.</li>
<li><cite>finagle-http</cite>: New Request object queryString utility functions.</li>
<li><cite>finagle-http</cite>: New Request/Response encode/decode functions.</li>
<li><cite>finagle-memcached</cite>: Actively reestablish zk connection whenever disconnected or expired.</li>
<li><cite>finagle-memcached</cite>: Cache pool cluster not updated since 2nd serverset change.</li>
<li><cite>finagle-memcached</cite>: Don&#8217;t use deprecated FuturePool.defaultPool.</li>
<li><cite>finagle-mysql</cite>: Add project in the list of deployed jar.</li>
<li><cite>finagle-mysql</cite>: Fix race condition in the authentication process.</li>
<li><cite>finagle-mysql</cite>: Move it to experimental package.</li>
<li><cite>finagle-ostrich4</cite>: Add OstrichExporter to enable Ostrich stats in the new App stack.</li>
<li><cite>finagle-redis</cite>: Add support for INFO command.</li>
<li><cite>finagle-resolver</cite>: additional visibility for Announcers and Resolvers.</li>
<li><cite>finagle-zipkin</cite>: new factory methods.</li>
</ul>
</div>
<div class="section" id="id97">
<h2>6.1.0<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h2>
<p>Released 2013/01/30</p>
<ul class="simple">
<li><cite>finagle</cite>: update util and ostrich dependencies</li>
<li><cite>finagle</cite>: libraries: preliminary 2.10 port/build</li>
<li><cite>finagle</cite>: Tracer use new daemon() flag; get rid of factory. Simplify.</li>
<li><cite>finagle</cite>: refactor clients and servers to be simpler, more logical.</li>
<li><cite>finagle-core</cite>: Provide a reportHostStatsTo API on ClientBuilder that per-host stats will be reported to.</li>
<li><cite>finagle-core</cite>: Use Groups in place of Clusters</li>
<li><cite>finagle-core</cite>: Create a NonShrinkingCluster</li>
<li><cite>finagle-redis</cite>: made zRange... commands work more like the actual redis commands</li>
<li><cite>finagle-stats</cite>: new project that provides a StatsReceiver based on Twitter&#8217;s Metrics library.</li>
<li><cite>finagle-http</cite>: add new-style client and server, including a primitive URL fetcher</li>
</ul>
</div>
<div class="section" id="id98">
<h2>6.0.5<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<p>Released 2013/01/22</p>
<ul class="simple">
<li><cite>finagle-core</cite>: basic SOCKS support for finagle clients, intended for use with ssh -D.</li>
</ul>
</div>
<div class="section" id="id99">
<h2>6.0.4<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h2>
<p>Released 2013/01/22</p>
<ul class="simple">
<li><cite>finagle-core</cite>: CachingPool owns connections and caches them even if upstream cancels</li>
<li><cite>finagle-core</cite>: Eliminate varargs overhead in StatsReceiver.time and timeFuture</li>
<li><cite>finagle-core</cite>: LoadBalancerTest: allow the tests to be run with Google Caliper</li>
<li><cite>finagle-core</cite>: make snap on mapped cluster thread-safe</li>
<li><cite>finagle-memcached</cite>: explicitly pass in initial cache nodes when using a a static cluster</li>
<li><cite>finagle-native</cite>: fix up grab_and_path_tomcat_native</li>
<li><cite>finagle-redis</cite>: finagle redis btree sorted set commands</li>
<li><cite>finagle-redis</cite>: Implemented redis HMSET</li>
<li><cite>finagle-redis</cite>: expireAt command</li>
</ul>
</div>
<div class="section" id="id100">
<h2>6.0.3<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/12/18</p>
<ul class="simple">
<li><cite>finagle-mux</cite>: new session protocol</li>
<li><cite>documentation</cite>: document connection management and associated configuration options</li>
<li><cite>finagle-core</cite>: expose newChannelTransport in Codec to allow multiplexing in clients</li>
<li><cite>finagle-http RequestProxy</cite>: proxy response</li>
</ul>
</div>
<div class="section" id="id101">
<h2>6.0.2<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/12/11</p>
<ul class="simple">
<li><cite>TimerSpec, RefcountedSpec</cite>: make deterministic</li>
<li><cite>finagle-core</cite>: JSSE SSL support for intermediate certificates</li>
<li><cite>finagle-core</cite>: push SSLEngine all the way up to the ServerBuilder</li>
<li><cite>finagle-core</cite>: preclude default SourceMonitor in clients</li>
<li><cite>finagle-core</cite>: ReusingPool for pipelined, multiplexed clients</li>
<li><cite>finagle-core</cite>: remove wasteful RichLong allocations in hot path</li>
<li><cite>finagle-core</cite>: move acquire/release of services outside of WatermarkPool&#8217;s synchronization</li>
<li><cite>finagle-core</cite>: remove unintended reflection-by-refinement-type</li>
<li><cite>finagle-thrift</cite>: actually support multiple protocols</li>
<li><cite>finagle-ostrich4</cite>: configurable delimiter</li>
<li><cite>finagle-redis</cite>: parse case-insensitive commands</li>
</ul>
</div>
<div class="section" id="id102">
<h2>6.0.1<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/11/26</p>
<ul class="simple">
<li>Use java.util.ArrayDeque in place of mutable.Queue due to <a class="reference external" href="https://issues.scala-lang.org/browse/SI-6690">https://issues.scala-lang.org/browse/SI-6690</a></li>
</ul>
</div>
<div class="section" id="id103">
<h2>6.0.0<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/11/26</p>
<ul class="simple">
<li>util 6.0.0 dependency</li>
<li><cite>finagle-core</cite>: new client/server APIs; not yet exposed to users</li>
</ul>
</div>
<div class="section" id="id104">
<h2>5.3.23<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/11/21</p>
<ul class="simple">
<li><cite>finagle-spdy</cite>: new codec</li>
<li><cite>finagle-core</cite>: ServiceTimeoutException is now a WriteException (so they can be retried)</li>
<li><cite>finagle-core</cite>: close channels owned by ChannelTransport before failing queues</li>
<li><cite>finagle-core</cite>: share ChannelStatsHandler in clients and servers to avoid excessive stats-related weakrefs</li>
<li><cite>finagle-core</cite>: don&#8217;t leak Spooled updates in the HeapBalancer</li>
</ul>
</div>
<div class="section" id="id105">
<h2>5.3.22<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/11/08</p>
<ul class="simple">
<li><cite>finagle-redis</cite>: String commands</li>
<li><cite>finagle-redis</cite>: collection.Set =&gt; collection.immutable.Set per #116</li>
<li><cite>finagle-thrift</cite>: SeqIdFilter: Don&#8217;t modify thrift requests.</li>
<li><cite>BackupRequestFilter</cite>: experimental service filter to perform backup requests</li>
</ul>
</div>
<div class="section" id="id106">
<h2>5.3.20<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/10/26</p>
<ul class="simple">
<li><cite>finagle-redis</cite>: fix zrevrangebyscore (<a class="reference external" href="https://github.com/twitter/finagle/issues/114">https://github.com/twitter/finagle/issues/114</a>)</li>
<li><cite>finagle-memcached</cite>: fix space leak when using clustering</li>
<li><cite>finagle-core</cite>: special case 1-hosted (static) clients to bypass loadbalancer</li>
<li><cite>finagle-core</cite>: Introduce an experimental buffer-based pool</li>
</ul>
</div>
<div class="section" id="id107">
<h2>5.3.19<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/10/16</p>
<ul class="simple">
<li>Upgrade ostrich to 8.2.9</li>
<li>Upgrade util to 5.3.13</li>
<li>Upgrading slf4j to 1.6.1</li>
<li><cite>finagle</cite>: Rm usage of deprecated Predef.error.</li>
<li><cite>finagle-core</cite>: Changed stats name in ChannelStatsHandler from exception msg to getClass.getName</li>
<li><cite>finagle-core</cite>: Add counters to track disconnections due to Idle activity (both read/write)</li>
<li><cite>finagle-core</cite>: Add &#8220;adds&#8221;/&#8221;removes&#8221; counters in HeapBalancer to track modifications</li>
<li><cite>finagle-core</cite>: Added name to HeapBalancer init (via exception) if HB size is 0</li>
<li><cite>finagle-core</cite>: Don&#8217;t log dropped events: they are actually quite numerous.</li>
<li><cite>finagle-kestrel</cite>: Disable failFast for kestrel.</li>
<li><cite>finagle-memcached</cite>: Cluster support within finagle-memcached (phase 2)</li>
<li><cite>finagle-redis</cite>: added new commands</li>
</ul>
</div>
<div class="section" id="id108">
<h2>5.3.18<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/09/27</p>
<ul class="simple">
<li><cite>Doc</cite>: update README with working thrift Java example</li>
<li><cite>Doc</cite>: fix compile errors in examples</li>
<li><cite>finagle-http</cite>: fix typo in RequestBuilder API</li>
<li><cite>finagle-stress</cite>: FrontEndServerStress refactor; now generates runnable binary</li>
<li><cite>finagle-core</cite>: add optional <cite>shouldRetry</cite> argument to RetryPolicy.tries</li>
<li><cite>finagle-core</cite>: pools propagate underlying availability correctly</li>
<li><cite>finagle-core</cite>: move fail-fast before the pool. This prevents it from masking errors from the failure accrual mechanism, and is arguably the &#8220;correct&#8221; placement</li>
<li><cite>finagle-core</cite>: fix argument type in RetryingFilter.apply</li>
<li><cite>finagle-core</cite>: failFast by default; disable for Kestrel</li>
<li><cite>finagle-memcached</cite>: cache-pool specific Cluster implementation</li>
<li><cite>finagle-memcached</cite>: add stat to cache-pool cluster</li>
<li><cite>finagle-redis</cite>: add scan, hscan commands</li>
<li><cite>finagle-redis</cite>: add list commands</li>
</ul>
</div>
<div class="section" id="id109">
<h2>5.3.9<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/09/07</p>
<ul class="simple">
<li><cite>finagle</cite>: Update/fix README</li>
<li><cite>finagle</cite>: Upgrade util to 5.3.10</li>
<li><cite>finagle</cite>: Update guava to v13</li>
<li><cite>finagle-redis</cite>: API v2 + update example</li>
<li><cite>finagle-thrift</cite>: validate connections based on TApplicationException</li>
<li><cite>finagle-core</cite>: SSL: fix connection failure propagation in futures</li>
</ul>
</div>
<div class="section" id="id110">
<h2>5.3.8<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h2>
<p>2012/08/24</p>
<ul class="simple">
<li><cite>finagle-core</cite>: Upgrade to Netty 3.5.5</li>
</ul>
</div>
<div class="section" id="id111">
<h2>5.3.7<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/08/24</p>
<ul class="simple">
<li><cite>Doc</cite>: Fix mistake in finagLe README that claimed Future objects have a getContentAsync method</li>
<li><cite>Doc</cite>: Fix typos in README</li>
<li><cite>finagle-thrift</cite>: ThriftChannelBufferDecoder: fix for composite buffers</li>
<li><cite>finagle-mysql</cite>: MySQL codec from Ruben Oanta.</li>
<li><cite>finagle-core</cite>: add isSuccess to FailureAccrualFactory</li>
<li><cite>finagle-http</cite>: Fix file extension bug in finagle-http</li>
</ul>
</div>
<div class="section" id="id112">
<h2>5.3.6<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/06/17</p>
<ul class="simple">
<li><cite>Doc</cite>: Typos</li>
<li><cite>finagle-core</cite>: fix canceling recurring timers</li>
<li><cite>finagle</cite>: kill finagle-memcached-hadoop</li>
<li><cite>finagle-memcached</cite>: in-process memcache server now supports expiry</li>
<li><cite>finagle-memcached</cite>: Adding key length validation and refactor validation logic.</li>
</ul>
</div>
<div class="section" id="id113">
<h2>5.3.5<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/08/10</p>
<ul class="simple">
<li><cite>finagle-core</cite>: Fixed stats visibility</li>
<li><cite>finagle-serversets</cite>: allow specification of an additional endpoint name in ZookeeperServerSetCluster</li>
<li><cite>finagle-serversets</cite>: ZookeeperServerSetCluster.join now return an EndpointStatus + Named/Daemonized init thread</li>
<li><cite>finagle-core</cite>: Changed Cache&#8217;s internal implementation from queue to deque (to allow LIFO behavior)</li>
<li><cite>finagle-core</cite>: cluster initialization honors global timeout in ClientBuilder.</li>
<li><cite>finagle-stress</cite>: finagle: kill obsolete benchmark</li>
</ul>
</div>
<div class="section" id="id114">
<h2>5.3.4<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/08/02</p>
<ul class="simple">
<li><cite>finagle</cite>: patch public release of OSS libraries; catch up sbt</li>
<li><cite>finagle-core</cite>: netty 3.5.3.Final</li>
<li><cite>finagle-core</cite>: Timer: address review comments, fix tiny race</li>
</ul>
</div>
<div class="section" id="id115">
<h2>5.3.3<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/07/31</p>
<ul class="simple">
<li><cite>finagle-core</cite>: Timer: dispose timeouts on cancellation</li>
</ul>
</div>
<div class="section" id="id116">
<h2>5.3.2<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/07/31</p>
<ul class="simple">
<li><cite>finagle-core</cite>: Fix critical bug in Timer by refactoring the Timer model</li>
<li><cite>finagle</cite>: Add OWNERS file to finagle-memcached, finagle-redis</li>
<li><cite>finagle-redis</cite>: add keys and hkeys</li>
<li><cite>finagle-zipkin</cite>: Add a debug flag, add an i64 bit field to the thrift request header struct and as a http header</li>
<li><cite>finagle-core</cite>: SourceTrackingMonitor to report whether it&#8217;s in client or server</li>
<li><cite>finagle-zipkin</cite>: Add duration to the the JVM gc annotation.</li>
</ul>
</div>
<div class="section" id="id117">
<h2>5.3.1<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/07/20</p>
<ul class="simple">
<li><cite>finagle-serversets</cite>: Use authenticated zookeeper client suggested for new SD cluster migration</li>
<li><cite>finagle-thrift</cite>: seqid filter: improved tests</li>
<li><cite>finagle-zipkin</cite>: Add duration to annotations for timing operations</li>
<li><cite>finagle-serversets</cite>: bump up server-set version to 1.0.10 (latest) in finagle-serversets</li>
</ul>
</div>
<div class="section" id="id118">
<h2>5.3.0<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/06/25</p>
<ul class="simple">
<li><cite>finagle-core</cite>: ClientBuilder and ServerBuilder&#8217;s MonitorFilter to report exception sources</li>
<li><cite>finagle-test</cite>: Add TaskTrackingTimer benchmark</li>
<li><cite>finagle-thrift</cite>: SeqIdFilter: helpful exceptions</li>
<li><cite>Dispatcher</cite>: all write exceptions are wrapped with WriteException</li>
</ul>
</div>
<div class="section" id="id119">
<h2>5.1.0<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/06/14</p>
<ul class="simple">
<li><cite>finagle</cite>: Upgrade util to 5.2.0, ostrich to 8.1.0</li>
<li><cite>finagle-redis</cite>: extend codec</li>
<li><cite>finagle-memcache</cite>: first phase of serverset support</li>
<li><cite>finagle-b3</cite>: we are using zipkin now</li>
<li><cite>finagle-kestrel</cite>: Kill com.twitter.concurrent.Channel</li>
<li><cite>finagle-core</cite>: JvmFiler, trace jvm events</li>
</ul>
</div>
<div class="section" id="id120">
<h2>5.0.2<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/06/01</p>
<ul class="simple">
<li><cite>finagle-core</cite>: Refactor the new way of managing resources</li>
<li><cite>finagle-core</cite>: Add capability to drain dispatcher on expire</li>
<li><cite>finagle-core</cite>: ZookeeperServersetCluster notify client when underlying Cluster is ready</li>
<li><cite>finagle-exception</cite>: Upgrade jerkson to 0.5.0 and streamyj to 0.4.1</li>
</ul>
</div>
<div class="section" id="id121">
<h2>5.0.0<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/05/25</p>
<ul class="simple">
<li>Upgrade to scala 2.9.2</li>
<li><cite>finagle-core</cite>: FailFast, do not admit requests when marked failed</li>
<li><cite>finagle-redis</cite>: now return tuples and doubles</li>
<li><cite>finagle-memcached</cite>: record client recv annotation after hit/miss</li>
<li><cite>finagle-core</cite>: expand exception chain in StatsFilter</li>
</ul>
</div>
<div class="section" id="id122">
<h2>4.0.0<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/05/08</p>
<ul class="simple">
<li><cite>http</cite>: add AddResponseHeadersFilter, CorsFilter</li>
<li><cite>finagle-redis</cite>: Add ZCard, ZRem, ZRevRange, ZRevRangeByScore commands</li>
<li><cite>finagle-memcached</cite>: Added b3 annotations for key hits/misses</li>
<li><cite>finagle-memcached</cite>: getResult/getsResult for java</li>
<li><cite>finagle-http</cite>: fix client codec</li>
<li><cite>HeapBalancer</cite>: close services that are removed from cluster</li>
<li><cite>finagle-redis</cite>: add tracing and stats support</li>
<li><cite>finagle-http</cite>: Add the client address for http traces. Also record uri after service name has been set</li>
<li><cite>finagle-memcached</cite>: more efficient implementation of GetResult.merged</li>
<li><cite>finagle-redis</cite>: return pairs for hgetall, zrangebyscores, zrevrangebyscores cmds</li>
<li><cite>finagle-core</cite>: introduce Transports and Dispatchers</li>
<li><cite>tracing</cite>: annotate client connection when tracing</li>
<li>update to netty 3.4.1.Final</li>
<li>prevent tenuring of response objects for responses from previously idle connections</li>
<li><cite>finagle-redis</cite>: add quit command</li>
<li><cite>finagle-http</cite>: add service multiplexer</li>
<li>friendlier java interface for retries</li>
</ul>
</div>
<div class="section" id="id123">
<h2>3.0.0<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/03/14</p>
<ul class="simple">
<li><cite>ServiceToChannelHandler</cite>: keep track of shutdowns with pending replies, don&#8217;t monitor errors that occur after cancellation.</li>
<li>Add two received_bytesm sent_bytes to per-channel stats.</li>
<li><cite>http</cite>: Add wwwAuthenticate(=) and isXmlHttpRequest</li>
<li><cite>http</cite>: CancelledRequestExceptions become 499s</li>
<li><cite>clients</cite>: experimental Fail-Fast mode (ClientBuilder.expFailFast(true))</li>
<li><cite>b3</cite>: Only log that a span was unfinished if we actually found one</li>
<li><cite>thrift</cite>: better support for one-way calls</li>
<li><cite>server</cite>: option for cancellation on hangup (default=true)</li>
<li><cite>codecs</cite>: improved support for multiplexed protocols</li>
<li>upgrade to netty 3.4.0.alpha1 which fixes connect timer resolution issues. Trustin says this should be as stable as 3.3.1.Final</li>
<li><cite>serversets</cite>: allow for additional endpoints</li>
<li><cite>tests</cite>: use true ephemeral ports instead of RandomSocket</li>
<li><cite>memcache stress</cite>: use new command line flag library from commons</li>
<li><cite>thrift</cite>: concatenate arrays with System.arraycopy</li>
<li><cite>memached</cite>: fix bug wherein we made requests with empty keys on retries</li>
</ul>
</div>
<div class="section" id="id124">
<h2>2.0.1<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/03/01</p>
<ul class="simple">
<li><cite>commons-stats</cite>: memoize counters</li>
<li><cite>cluster</cite>: don&#8217;t reuse adds; keep many values per key</li>
<li><cite>clientbuilder</cite>: buffer handlers to avoid deadlock</li>
</ul>
</div>
<div class="section" id="id125">
<h2>2.0.0<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/02/27</p>
<ul class="simple">
<li>unify client and server factories</li>
<li><cite>memcache stress test</cite>: one connection per process</li>
<li><cite>b3</cite>: make tests deterministic</li>
<li>upgrade to newest util (and to Guava r11)</li>
</ul>
</div>
<div class="section" id="id126">
<h2>1.11.1<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/02/15</p>
<ul class="simple">
<li><cite>HeapBalancer</cite>: safely remove services from cluster when they have requests in flight</li>
<li><cite>http</cite>: speed up logging</li>
<li><cite>core</cite>: keep track of handler walltimes</li>
</ul>
</div>
<div class="section" id="id127">
<h2>1.11.0<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/02/13</p>
<ul class="simple">
<li><cite>finagle-redis</cite>: publish.</li>
<li><cite>http</cite>: Message.mediaType=: no longer sets charset to utf-8</li>
<li><cite>http</cite>: Message.setContentType: defaults charset to utf-8</li>
<li><cite>http</cite>: added Message.charset, Message.charset=</li>
<li>Refactor resource management inside of the builders, making lifetimes explicit</li>
<li>Generic cluster API, support in the HeapBalancer for dynamic hosts list; remove other load balancers</li>
<li><cite>redis</cite>: memcache.Client-style interface</li>
<li><cite>netty</cite>: update to 3.3.1.Final, and add NPN TLS extension support</li>
<li><cite>b3</cite>: flush span if timeout occurs</li>
<li><cite>b3</cite>: java friendly tracer API</li>
<li><cite>stress/example</cite>: &#8220;topo&#8221;, a minimal appserver-like topology for testing</li>
<li><cite>memcache</cite>: tunable example for benchmarking, testing</li>
<li><cite>ServerBuilder</cite>: major refactor &amp; simplification</li>
<li><cite>SummarizingStatsReceiver</cite>: fix bug where sort didn&#8217;t operate over a stable collection</li>
</ul>
</div>
<div class="section" id="id128">
<h2>1.10.0<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/01/24</p>
<ul class="simple">
<li><cite>http</cite>: Message.withX methods now have parameterized return types</li>
<li><cite>memcached</cite>: (Ketama) host ejection</li>
<li>Noisier, more robust monitoring.</li>
<li><cite>zk cluster</cite>: avoid potential infinite loop</li>
<li><cite>http streaming</cite>: better detection, handling of dead channels</li>
<li><cite>http</cite>: always encode output as UTF-8</li>
<li><cite>stream</cite>: use offer/broker for duplex stream</li>
<li><cite>redis</cite>: imported finagle redis client from Tumblr. not yet published.</li>
</ul>
</div>
<div class="section" id="id129">
<h2>1.9.12<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h2>
<p>Released 2012/01/05</p>
<ul class="simple">
<li><cite>SSLEngine</cite>: do not reuse between connections</li>
<li><cite>ServerBuilder.Server</cite>: localAddress to get ephemeral port values</li>
<li>More detailed client stats</li>
<li><cite>kestrel</cite>: parse parseStatsLines</li>
<li><cite>FailFastFactory</cite>: new fast-fail strategy with maxOutstandingConnections</li>
<li><cite>exceptions</cite>: add peer information to connection failures, add service name to all exceptions</li>
<li><cite>fixes</cite>: space leak in stats, ReliableDuplexFilter lazy load ordering</li>
<li><cite>b3</cite>: allow the user to specify sample rate</li>
<li><cite>exception reporter</cite>: share scribe connection across instances</li>
<li><cite>finagle-ostrich</cite>: remove, it&#8217;s obsoleted by finagle-ostrich4</li>
</ul>
</div>
<div class="section" id="id130">
<h2>1.9.10<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/12/02</p>
<ul class="simple">
<li>update to util 1.12.7</li>
</ul>
</div>
<div class="section" id="id131">
<h2>1.9.9<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/12/01</p>
<ul class="simple">
<li>update to util 1.12.6</li>
</ul>
</div>
<div class="section" id="id132">
<h2>1.9.8<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/11/30</p>
<ul class="simple">
<li>upgrade to netty 3.2.7.Final</li>
<li><cite>streaming</cite>: support HTTP/1.0</li>
<li><cite>native</cite>: fix content-length header</li>
</ul>
</div>
<div class="section" id="id133">
<h2>1.9.7<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/11/29</p>
<ul class="simple">
<li><cite>http</cite>: Propagate CancelledRequestException rather than continuing</li>
<li><cite>thrift</cite>: deprecated LookupContext, using finagle.thrift.ClientId</li>
<li>use monitors where applicable (composable widgets for handling exceptions)</li>
<li><cite>memcache</cite>: PHPMemCacheClient</li>
<li>make RetryingFilter usable from Java</li>
<li><cite>thrift</cite>: convert uncaught application exceptions into TApplicationExceptions on the wire</li>
<li>NoStacktrace.getStackTrace() returns non-empty stacktrace array</li>
<li>kill off openConnectionsHealthThresholds (unused)</li>
</ul>
</div>
<div class="section" id="id134">
<h2>1.9.6<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/11/08</p>
<ul class="simple">
<li><cite>SSL</cite>: make native provider bootstrapping code work; refactor &#8216;Ssl&#8217; singleton</li>
<li><cite>tracing</cite>: Update configurations and libraries to use tracer factory introduced to make it possible to release resources properly in tracers</li>
<li><cite>finagle-thrift</cite>: connection options + client id</li>
<li>a more flexible retry filter</li>
</ul>
</div>
<div class="section" id="id135">
<h2>1.9.5<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/11/04</p>
<ul class="simple">
<li><cite>ExpiringService</cite>: add stats for idle and lifetime expiration. Deactivate() regardless of latch counter</li>
<li><cite>Filters</cite>: don&#8217;t apply refcounts on composition, do it only (and always) in the builder</li>
<li>Count pending timeouts, and export them</li>
<li><cite>ChannelService</cite>: release services when <cite>prepareChannel</cite> fails. This fixes a connection leak</li>
<li><cite>WatermarkPool</cite>: flush waiters on creation failure. This fixes a condition wherein we&#8217;d keep waiters unnecessarily.</li>
<li><cite>Timeout exceptions</cite>: include service name</li>
<li>Suppress excessive logging of the exceptions that mostly caused by unreliable client connections.</li>
<li><cite>memcached</cite>: Add generic type support (via Client.adapt), and Array[Byte] and String instances</li>
<li><cite>finagle-stream</cite>: do not admit concurrent requests</li>
<li><cite>Tracing</cite>: Add release method to Tracer trait, add tracerFactory to builders, deprecate tracer on builders</li>
</ul>
</div>
<div class="section" id="id136">
<h2>1.9.4<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/10/24</p>
<ul class="simple">
<li><cite>Service</cite>: response Future will now be cancelled if the client disconnects</li>
<li>use static exceptions for TimedOutRequestException</li>
<li><cite>kestrel</cite>: Cancel request Future on close in kestrel ReadHandle</li>
<li><cite>exception cleanup</cite>: wrap all Channel exceptions with their underlying exception. This makes UnknownChannelExceptions in particular easier to debug</li>
<li><cite>Friendlier exceptions</cite>: In order to give very specific error messages to timeouts in finagle (so beginners know which settings in the client and server builder caused them), I&#8217;m adding lots of human-readable messages to the various TimeoutExceptions.</li>
<li><cite>some timer bug fixes, particularly</cite>: TimerToNettyTimer: actually cancel underlying task.</li>
</ul>
</div>
<div class="section" id="id137">
<h2>1.9.2<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/10/14</p>
<ul class="simple">
<li><cite>tracing</cite>: Change SpanId to use RichU64String</li>
<li><cite>tracing</cite>: Trace.{enable,disable}</li>
<li><cite>http</cite>: http.RequestBuilder</li>
<li><cite>http</cite>: add common media types</li>
</ul>
</div>
<div class="section" id="id138">
<h2>1.9.1<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/09/28</p>
<ul class="simple">
<li><cite>memcached</cite>: new interface for partial results (ie. retrieval failures + successes)</li>
<li><cite>tracing</cite>: set service name in the endpoint instead of the span</li>
<li>more idiomatic KetamaClientBuilder constructor</li>
<li><cite>tracing</cite>: convenience methods to add binary annotations</li>
<li><cite>finagle-http</cite>: misc. fixes</li>
<li>HeapBalancer - a new lg n load balancer (asymptotically more efficient!)</li>
<li>upgrade to ostrich 4.9.0</li>
</ul>
</div>
<div class="section" id="id139">
<h2>1.9.0<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/08/29</p>
<ul class="simple">
<li><cite>http</cite>: new http library</li>
</ul>
</div>
<div class="section" id="id140">
<h2>1.8.4<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/08/23</p>
<ul class="simple">
<li><cite>tracing</cite>: fixed space leak</li>
<li><cite>ssl</cite>: integrate openssl sslengine</li>
<li><cite>thrift</cite>: update to sbt-thrift 2.0.1</li>
<li><cite>stream</cite>: always release server when we close</li>
<li><cite>serversets</cite>: upgraded to guava-r09</li>
<li><cite>core</cite>: expose stats on failed retries</li>
</ul>
</div>
<div class="section" id="id141">
<h2>1.8.3<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/08/12</p>
<ul class="simple">
<li><cite>thrift</cite>: add a server-side buffered codec; fix tracing issue in buffered codec</li>
<li><cite>http</cite>: workaround hole in netty logic to guarantee maxRequestSize</li>
<li><cite>serversets</cite>: don&#8217;t block on ClientBuilder construction</li>
<li><cite>ostrich4</cite>: update to ostrich 4.8.2</li>
<li><cite>streaming</cite>: reimplement HTTP chunked streaming in terms of offer/broker</li>
<li><cite>kestrel</cite>: buffered &amp; merging of ReadHandles</li>
</ul>
</div>
<div class="section" id="id142">
<h2>1.8.1<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/08/05</p>
<ul class="simple">
<li>upgrade to netty 3.2.5.Final</li>
<li><cite>kestrel</cite>: fix visibility of ResultWithCAS</li>
<li><cite>kestrel</cite>: Client.{read,write}, Client.readReliably, MultiReader: suite of kestrel streaming readers (including grabby-hands replacements) using Offer/Broker</li>
<li><cite>kestrel</cite>: don&#8217;t render timeouts &gt; 2^31-1</li>
<li><cite>tracing</cite>: fix sampling bug</li>
<li><cite>tracing</cite>: trace the kestrel client</li>
<li>quench unecessary error reporting</li>
</ul>
</div>
<div class="section" id="id143">
<h2>1.8.0<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/08/02</p>
<ul class="simple">
<li><cite>SSL</cite>: perform hostname validation in the client. this is the reason for the minor bump: we change the .tls() ClientBuilder signature</li>
<li>introduce util-codec dependency for use of the apache commons base 64 codec</li>
</ul>
</div>
<div class="section" id="id144">
<h2>1.7.5<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/07/29</p>
<ul class="simple">
<li>make it easier to use the NullStatsReceiver from java</li>
<li>convert WriteException to a case class (github issue 25)</li>
<li>add _root_. to java.util.Map import. reorder imports</li>
<li>Upgrade finagle-common-stats to twitter-common-stats 0.0.16</li>
<li>encode more HTTP codec errors</li>
<li>adding cardinality to ServiceException</li>
<li><cite>finagle CachingPool</cite>: limit size to highWatermark - lowWatermark</li>
<li><cite>exception reporting</cite>: gzipping trace strings</li>
<li>set ostrich version of finagle-ostrich4 to 4.7.3</li>
<li><cite>ChannelServiceFactory</cite>: encode exceptions from bootstrap.connect()</li>
</ul>
</div>
<div class="section" id="id145">
<h2>1.7.4<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/07/22</p>
<ul class="simple">
<li><cite>http</cite>: convert codec exceptions into 4xx errors; report them as such upstream</li>
<li><cite>memcache</cite>: <cite>gets</cite> and <cite>cas</cite> support.</li>
</ul>
</div>
<div class="section" id="id146">
<h2>1.7.3<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/07/19</p>
<ul class="simple">
<li><cite>fix</cite>: 1.7.2 introduced a regression in the pool that may, under certain circumstances, admit connections beyond the high watermark.</li>
<li>quench exception for setting multiple Promise values when racing with write errors.</li>
<li>Adds tracing support for the Memcached client. This only creates the client side annotations, no support for passing along ids and such to the memcached server.</li>
</ul>
</div>
<div class="section" id="id147">
<h2>1.7.2<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h2>
<p>Released 2011/07/18</p>
<ul class="simple">
<li>support end-to-end cancellation in finagle clients; fixes possible pool starvation conditions, and allows clients to cancel requests and reclaim resources</li>
<li><cite>end-to-end timeouts</cite>: introduce, .connectTimeout and .timeout. .connectTimeout is the end-to-end connection timeout (includes acquisition &amp; TCP time), .timeout is an end-to-end request time: no requests will take longer</li>
<li>some doc fixes</li>
<li>misc. bug fixes</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo" src="_static/logo_small.png" alt="Logo"/>
</a></p><a href="index.html"><h3>Finagle</h3></a>
<p>
  Finagle is a network stack for distributed systems.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="http://github.com/twitter/finagle">Finagle @ GitHub</a></li>
  <li><a href="http://github.com/twitter/finagle/issues">Issue Tracker</a></li>
</ul>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#x">6.x</a></li>
<li><a class="reference internal" href="#id1">6.35.0</a><ul>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#runtime-behavior-changes">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#breaking-api-changes">Breaking API Changes</a></li>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">6.34.0</a><ul>
<li><a class="reference internal" href="#id3">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id4">New Features</a></li>
<li><a class="reference internal" href="#id5">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id6">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">6.33.0</a><ul>
<li><a class="reference internal" href="#id8">New Features</a></li>
<li><a class="reference internal" href="#id9">Deprecations</a></li>
<li><a class="reference internal" href="#id10">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id11">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id12">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">6.32.0</a></li>
<li><a class="reference internal" href="#id14">6.31.0</a><ul>
<li><a class="reference internal" href="#id15">New Features</a></li>
<li><a class="reference internal" href="#id16">Deprecations</a></li>
<li><a class="reference internal" href="#id17">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id18">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id19">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">6.30.0</a><ul>
<li><a class="reference internal" href="#id21">New Features</a></li>
<li><a class="reference internal" href="#id22">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id23">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id24">6.29.0</a><ul>
<li><a class="reference internal" href="#id25">Deprecations</a></li>
<li><a class="reference internal" href="#id26">New Features</a></li>
<li><a class="reference internal" href="#id27">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id28">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29">6.28.0</a><ul>
<li><a class="reference internal" href="#id30">New Features</a></li>
<li><a class="reference internal" href="#id31">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id32">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id33">6.27.0</a><ul>
<li><a class="reference internal" href="#id34">New Features</a></li>
<li><a class="reference internal" href="#id35">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id36">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id37">6.26.0</a><ul>
<li><a class="reference internal" href="#id38">Deprecations</a></li>
<li><a class="reference internal" href="#id39">New Features</a></li>
<li><a class="reference internal" href="#id40">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id41">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">6.25.0</a><ul>
<li><a class="reference internal" href="#id43">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id44">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id45">Deprecations</a></li>
<li><a class="reference internal" href="#id46">New Features</a></li>
<li><a class="reference internal" href="#id47">Bug Fixes</a></li>
<li><a class="reference internal" href="#miscellaneous-cleanup">Miscellaneous Cleanup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id48">6.24.0</a><ul>
<li><a class="reference internal" href="#id49">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id50">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id51">Deprecations</a></li>
<li><a class="reference internal" href="#id52">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id53">6.23.0</a><ul>
<li><a class="reference internal" href="#id54">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id55">Deprecations</a></li>
<li><a class="reference internal" href="#id56">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id57">6.22.0</a><ul>
<li><a class="reference internal" href="#id58">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id59">New Features</a></li>
<li><a class="reference internal" href="#id60">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#optimization">Optimization</a></li>
<li><a class="reference internal" href="#id61">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id62">6.21.0</a></li>
<li><a class="reference internal" href="#id63">6.20.0</a></li>
<li><a class="reference internal" href="#id64">6.19.0</a></li>
<li><a class="reference internal" href="#id65">6.18.0</a></li>
<li><a class="reference internal" href="#id66">6.17.0</a></li>
<li><a class="reference internal" href="#id67">6.16.0</a></li>
<li><a class="reference internal" href="#id68">6.15.0</a></li>
<li><a class="reference internal" href="#id69">6.14.0</a></li>
<li><a class="reference internal" href="#id70">6.13.1</a></li>
<li><a class="reference internal" href="#id71">6.13.0</a></li>
<li><a class="reference internal" href="#id72">6.12.2</a></li>
<li><a class="reference internal" href="#id73">6.12.1</a></li>
<li><a class="reference internal" href="#id74">6.12.0</a></li>
<li><a class="reference internal" href="#id75">6.11.1</a></li>
<li><a class="reference internal" href="#id76">6.11.0</a></li>
<li><a class="reference internal" href="#id77">6.10.0</a></li>
<li><a class="reference internal" href="#id78">6.9.0</a></li>
<li><a class="reference internal" href="#id79">6.8.1</a></li>
<li><a class="reference internal" href="#id80">6.8.0</a></li>
<li><a class="reference internal" href="#id81">6.7.4</a></li>
<li><a class="reference internal" href="#id82">6.7.2</a></li>
<li><a class="reference internal" href="#id83">6.7.1</a></li>
<li><a class="reference internal" href="#id84">6.7.0</a></li>
<li><a class="reference internal" href="#id85">6.6.2</a></li>
<li><a class="reference internal" href="#id86">6.6.0</a></li>
<li><a class="reference internal" href="#id87">6.5.2</a></li>
<li><a class="reference internal" href="#id88">6.5.1</a></li>
<li><a class="reference internal" href="#id89">6.5.0</a></li>
<li><a class="reference internal" href="#id90">6.4.1</a></li>
<li><a class="reference internal" href="#id91">6.4.0</a></li>
<li><a class="reference internal" href="#id92">6.3.0</a></li>
<li><a class="reference internal" href="#id93">6.1.4</a></li>
<li><a class="reference internal" href="#id94">6.1.3</a></li>
<li><a class="reference internal" href="#id95">6.1.2</a></li>
<li><a class="reference internal" href="#id96">6.1.1</a></li>
<li><a class="reference internal" href="#id97">6.1.0</a></li>
<li><a class="reference internal" href="#id98">6.0.5</a></li>
<li><a class="reference internal" href="#id99">6.0.4</a></li>
<li><a class="reference internal" href="#id100">6.0.3</a></li>
<li><a class="reference internal" href="#id101">6.0.2</a></li>
<li><a class="reference internal" href="#id102">6.0.1</a></li>
<li><a class="reference internal" href="#id103">6.0.0</a></li>
<li><a class="reference internal" href="#id104">5.3.23</a></li>
<li><a class="reference internal" href="#id105">5.3.22</a></li>
<li><a class="reference internal" href="#id106">5.3.20</a></li>
<li><a class="reference internal" href="#id107">5.3.19</a></li>
<li><a class="reference internal" href="#id108">5.3.18</a></li>
<li><a class="reference internal" href="#id109">5.3.9</a></li>
<li><a class="reference internal" href="#id110">5.3.8</a></li>
<li><a class="reference internal" href="#id111">5.3.7</a></li>
<li><a class="reference internal" href="#id112">5.3.6</a></li>
<li><a class="reference internal" href="#id113">5.3.5</a></li>
<li><a class="reference internal" href="#id114">5.3.4</a></li>
<li><a class="reference internal" href="#id115">5.3.3</a></li>
<li><a class="reference internal" href="#id116">5.3.2</a></li>
<li><a class="reference internal" href="#id117">5.3.1</a></li>
<li><a class="reference internal" href="#id118">5.3.0</a></li>
<li><a class="reference internal" href="#id119">5.1.0</a></li>
<li><a class="reference internal" href="#id120">5.0.2</a></li>
<li><a class="reference internal" href="#id121">5.0.0</a></li>
<li><a class="reference internal" href="#id122">4.0.0</a></li>
<li><a class="reference internal" href="#id123">3.0.0</a></li>
<li><a class="reference internal" href="#id124">2.0.1</a></li>
<li><a class="reference internal" href="#id125">2.0.0</a></li>
<li><a class="reference internal" href="#id126">1.11.1</a></li>
<li><a class="reference internal" href="#id127">1.11.0</a></li>
<li><a class="reference internal" href="#id128">1.10.0</a></li>
<li><a class="reference internal" href="#id129">1.9.12</a></li>
<li><a class="reference internal" href="#id130">1.9.10</a></li>
<li><a class="reference internal" href="#id131">1.9.9</a></li>
<li><a class="reference internal" href="#id132">1.9.8</a></li>
<li><a class="reference internal" href="#id133">1.9.7</a></li>
<li><a class="reference internal" href="#id134">1.9.6</a></li>
<li><a class="reference internal" href="#id135">1.9.5</a></li>
<li><a class="reference internal" href="#id136">1.9.4</a></li>
<li><a class="reference internal" href="#id137">1.9.2</a></li>
<li><a class="reference internal" href="#id138">1.9.1</a></li>
<li><a class="reference internal" href="#id139">1.9.0</a></li>
<li><a class="reference internal" href="#id140">1.8.4</a></li>
<li><a class="reference internal" href="#id141">1.8.3</a></li>
<li><a class="reference internal" href="#id142">1.8.1</a></li>
<li><a class="reference internal" href="#id143">1.8.0</a></li>
<li><a class="reference internal" href="#id144">1.7.5</a></li>
<li><a class="reference internal" href="#id145">1.7.4</a></li>
<li><a class="reference internal" href="#id146">1.7.3</a></li>
<li><a class="reference internal" href="#id147">1.7.2</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="FAQ.html" title="previous chapter">FAQ</a></li>
      <li>Next: <a href="license.html" title="next chapter">License</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">&copy; Copyright 2016 Twitter, Inc.</div>
  
  </body>
</html>