<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &mdash; Finagle 6.36.0 documentation</title>
    
    <link rel="stylesheet" href="_static/finagle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.36.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Finagle 6.36.0 documentation" href="index.html" />
    <link rel="next" title="Servers" href="Servers.html" />
    <link rel="prev" title="Services &amp; Filters" href="ServicesAndFilters.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head>
  <body role="document">
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Servers.html" title="Servers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ServicesAndFilters.html" title="Services &amp; Filters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Finagle</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>Prior to <a class="reference internal" href="changelog.html"><span class="doc">version 6.0</span></a>, the <code class="docutils literal"><span class="pre">ClientBuilder</span></code>/<code class="docutils literal"><span class="pre">ServerBuilder</span></code> API was the
primary method for configuring the modules inside a Finagle <a class="reference internal" href="Clients.html#finagle-clients"><span class="std std-ref">client</span></a>
or <a class="reference internal" href="Servers.html#finagle-servers"><span class="std std-ref">server</span></a>. We are moving away from this model for various
<a class="reference internal" href="FAQ.html#configuring-finagle6"><span class="std std-ref">reasons</span></a>.</p>
<p>The modern way of configuring Finagle clients or servers is to use the Finagle 6 API,
which is generally available via the <code class="docutils literal"><span class="pre">with</span></code>-prefixed methods. For example, the following
code snippet creates a new HTTP client altered with two extra parameters: label and transport
verbosity.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.twitter.finagle.Http</span>

<span class="k">val</span> <span class="n">client</span> <span class="k">=</span> <span class="nc">Http</span><span class="o">.</span><span class="n">client</span>
  <span class="o">.</span><span class="n">withLabel</span><span class="o">(</span><span class="s">&quot;my-http-client&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">withTransport</span><span class="o">.</span><span class="n">verbose</span>
  <span class="o">.</span><span class="n">newService</span><span class="o">(</span><span class="s">&quot;localhost:10000,localhost:10001&quot;</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the examples in this user guide use the Finagle 6 API as a main configuration
method and we encourage all the Finagle users to follow this pattern given that
the <code class="docutils literal"><span class="pre">ClientBuilder</span></code>/<code class="docutils literal"><span class="pre">ServerBuilder</span></code> API will eventually be deprecated.
For help migrating, see <a class="reference internal" href="FAQ.html#configuring-finagle6"><span class="std std-ref">the FAQ</span></a> as well as
<a class="reference internal" href="Clients.html#finagle-clients"><span class="std std-ref">client</span></a> and <a class="reference internal" href="Servers.html#finagle-servers"><span class="std std-ref">server</span></a> configuration.</p>
</div>
<p>In addition to <code class="docutils literal"><span class="pre">with</span></code>-prefixed methods that provide easy-to-use and safe-to-configure
parameters of Finagle clients and servers, there is an expert-level <cite>Stack API</cite>.</p>
<p>The Stack API is available via the <code class="docutils literal"><span class="pre">configured</span></code> method on a Finagle client/server
that takes a stack param: a value of arbitrary type for which there is an implicit instance
of <code class="docutils literal"><span class="pre">Stack.Param</span></code> type-class available in the scope. For example, the following code
demonstrates how to use <code class="docutils literal"><span class="pre">.configured</span></code> to override TCP socket options provided by default.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.twitter.finagle.Http</span>
<span class="k">import</span> <span class="nn">com.twitter.transport.Transport</span>

<span class="k">val</span> <span class="n">client</span> <span class="k">=</span> <span class="nc">Http</span><span class="o">.</span><span class="n">client</span>
  <span class="o">.</span><span class="n">configured</span><span class="o">(</span><span class="nc">Transport</span><span class="o">.</span><span class="nc">Options</span><span class="o">(</span><span class="n">noDelay</span> <span class="k">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">reuseAddr</span> <span class="k">=</span> <span class="kc">false</span><span class="o">))</span>
  <span class="o">.</span><span class="n">newService</span><span class="o">(</span><span class="s">&quot;localhost:10000,localhost:10001&quot;</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The expert-level API requires deep knowledge of Finagle internals and
it&#8217;s highly recommended to avoid it unless you&#8217;re absolutely sure what
you&#8217;re doing.</p>
</div>
<div class="section" id="design-principles">
<h2>Design Principles<a class="headerlink" href="#design-principles" title="Permalink to this headline">¶</a></h2>
<p>Finagle has many different components and we tried to faithfully model our configuration
to help understand the constituents and the resulting behavior. For the sake of consistency,
the current version of the <code class="docutils literal"><span class="pre">with</span></code> API is designed with the following principles in mind.</p>
<ol class="arabic simple">
<li><strong>Reasonable grouping of parameters</strong>: We target for the fine grained API so most of the
<code class="docutils literal"><span class="pre">with</span></code>-prefixed methods take a single argument. Although, there is a common sense driven
exception from this rule: some of the parameters only make sense when viewed as a group
rather than separately (e.g. it makes no sense to specify SOCKS proxy credentials when
the proxy itself is disabled).</li>
<li><strong>No boolean flags (i.e., enabled, yesOrNo)</strong>: Boolean values are usually hard to
reason about because their type doesn&#8217;t encode it&#8217;s mission in the domain (e.g. in
most of the cases it&#8217;s impossible to tell what <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code> means in a function
call). Instead of boolean flags, we use a pair of methods <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">noX</span></code> to indicate
whether the <code class="docutils literal"><span class="pre">x</span></code> feature is enabled or disabled.</li>
<li><strong>Less primitive number types in the API</strong>: We promote a sane level of type-full
programming, where a reasonable level of guarantees is encoded into a type-system.
Thus, we never use primitive number types for durations and storage units given that
there are utility types: <code class="docutils literal"><span class="pre">Duration</span></code> and <code class="docutils literal"><span class="pre">StorageUnit</span></code>.</li>
<li><strong>No experimental and/or advanced features</strong>: While, it&#8217;s relatively safe to configure
parameters exposed via <code class="docutils literal"><span class="pre">with</span></code>-prefixed methods, you should never assume the same about
the <cite>Stack API</cite> (i.e., <code class="docutils literal"><span class="pre">.configured</span></code>). It&#8217;s <em>easy</em> to configure basic parameters; it&#8217;s
<em>possible</em> to configure expert-level parameters.</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo" src="_static/logo_small.png" alt="Logo"/>
</a></p><a href="index.html"><h3>Finagle</h3></a>
<p>
  Finagle is a network stack for distributed systems.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="http://github.com/twitter/finagle">Finagle @ GitHub</a></li>
  <li><a href="http://github.com/twitter/finagle/issues">Issue Tracker</a></li>
</ul>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#design-principles">Design Principles</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="ServicesAndFilters.html" title="previous chapter">Services &amp; Filters</a></li>
      <li>Next: <a href="Servers.html" title="next chapter">Servers</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">&copy; Copyright 2016 Twitter, Inc.</div>
  
  </body>
</html>